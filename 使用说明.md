# 后宫建筑系统使用说明

## 文件概述

本系统包含以下关键文件：

1. **常驻变量.md** - 定义系统中使用的变量
2. **shipstatus模板.html** - 根据已解锁的建筑显示角色状态
3. **商城模板.html** - 每次对话自动刷新的商城系统
4. **开局.html** - 初始设置界面

## 使用步骤

### 1. 初始设置

1. 在SillyTavern中打开角色卡
2. 在对话中发送命令 `/show 开局.html`
3. 按照界面提示完成初始设置：
   - 选择性别
   - 选择身份和能力
   - 选择建筑扩展
   - 选择初始妻子
   - 选择世界观
4. 点击"发送到聊天"按钮将设置发送到聊天中

### 2. 使用变量系统

常驻变量设计用于自动：
- 为每位新遇到的妻子创建变量
- 根据互动更新妻子的调教度
- 刷新商城内容
- 根据已解锁的建筑显示状态

### 3. 查看角色状态

在对话中使用以下命令查看当前状态：
```
/show shipstatus模板.html
```

这将显示：
- 你的个人状态（积分、妻子数量等）
- 已解锁建筑的状态
- 所有妻子的状态

### 4. 使用商城系统

每次对话开始时，商城会自动刷新。查看商城：
```
/show 商城模板.html
```

购买物品：
```
购买 [物品名称]
```

### 5. 变量说明

- `<user>商城积分` - 你的积分余额
- `<user>妻子数量` - 你拥有的妻子数量
- `<user>当前服装` - 你当前穿着的服装
- `[妻子名称]_调教度` - 每位妻子的调教程度（0-100）
- 建筑变量 - 记录已解锁的建筑扩展

## 注意事项

1. 每次对话开始时，商城会自动刷新商品
2. 妻子的调教度影响她们的行为和态度
3. `<shipstatus>` 显示会根据已解锁的建筑自动调整

## 自定义和扩展

可以通过编辑以下文件自定义系统：
- **常驻变量.md** - 添加更多变量
- **shipstatus模板.html** - 自定义状态显示
- **商城模板.html** - 添加更多商品类别

## 故障排除

如果变量显示不正确，请尝试以下操作：
1. 确保使用正确的变量名称
2. 检查变量格式是否正确
3. 使用 `/vars` 命令查看当前所有变量值
4. 使用 `/setvar [变量名] [值]` 手动设置变量值

祝您在后宫建筑系统中玩得开心！ 