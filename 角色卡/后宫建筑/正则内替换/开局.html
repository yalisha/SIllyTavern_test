```
<html>

<head>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      margin: 0;
      padding: 20px;
      text-align: center;
      color: #333;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      color: #9c27b0;
      margin-bottom: 30px;
    }

    h2 {
      color: #7b1fa2;
      margin-bottom: 20px;
    }

    .page {
      display: none;
    }

    .page.active {
      display: block;
    }

    .option-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-bottom: 20px;
    }

    .option-card {
      border: 2px solid #e1bee7;
      border-radius: 8px;
      padding: 15px;
      cursor: pointer;
      transition: all 0.3s;
      background-color: #f3e5f5;
    }

    .option-card:hover {
      background-color: #e1bee7;
      transform: translateY(-2px);
    }

    .option-card.selected {
      background-color: #ce93d8;
      border-color: #9c27b0;
      color: white;
    }

    .multi-select .option-card.selected {
      background-color: #ce93d8;
      border-color: #9c27b0;
      color: white;
    }

    .wife-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-bottom: 20px;
      max-height: 300px;
      overflow-y: auto;
    }

    .wife-card {
      border: 1px solid #e1bee7;
      border-radius: 5px;
      padding: 10px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .wife-card:hover {
      background-color: #f3e5f5;
    }

    .wife-card.selected {
      background-color: #ce93d8;
      border-color: #9c27b0;
      color: white;
    }

    .wife-card .training-stage-select {
      width: 100%;
      padding: 5px;
      border: 1px solid #e1bee7;
      border-radius: 4px;
      background-color: white;
      color: #333;
      font-size: 12px;
      cursor: pointer;
    }

    .wife-card .training-stage-select:focus {
      outline: none;
      border-color: #9c27b0;
    }

    .wife-card.selected .training-stage-select {
      background-color: #f3e5f5;
      border-color: #9c27b0;
    }

    #customWifeStage {
      margin-top: 10px;
      width: 100%;
      padding: 10px;
      border: 1px solid #e1bee7;
      border-radius: 5px;
      background-color: white;
    }

    #customWifeStage:focus {
      outline: none;
      border-color: #9c27b0;
    }

    .custom-input {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border: 1px solid #e1bee7;
      border-radius: 5px;
    }

    .button-group {
      margin-top: 30px;
      display: flex;
      justify-content: space-between;
    }

    button {
      background-color: #9c27b0;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s;
    }

    button:hover {
      background-color: #7b1fa2;
    }

    button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }

    .summary-container {
      text-align: left;
      padding: 20px;
      background-color: #f3e5f5;
      border-radius: 8px;
      margin-bottom: 20px;
    }

    .summary-section {
      margin-bottom: 15px;
    }

    .summary-section h3 {
      color: #7b1fa2;
      margin-bottom: 5px;
    }

    .training-level-container {
      margin-top: 10px;
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .training-level-slider {
      width: 100%;
      height: 5px;
      -webkit-appearance: none;
      appearance: none;
      background: #e1bee7;
      outline: none;
      border-radius: 3px;
      cursor: pointer;
    }

    .training-level-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 15px;
      height: 15px;
      background: #9c27b0;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s;
    }

    .training-level-slider::-webkit-slider-thumb:hover {
      background: #7b1fa2;
      transform: scale(1.2);
    }

    .training-level-slider::-moz-range-thumb {
      width: 15px;
      height: 15px;
      background: #9c27b0;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s;
    }

    .training-level-slider::-moz-range-thumb:hover {
      background: #7b1fa2;
      transform: scale(1.2);
    }

    .wife-card.selected .training-level-slider {
      background: #f3e5f5;
    }

    .wife-card.selected .training-level-slider::-webkit-slider-thumb {
      background: #ce93d8;
    }

    .wife-card.selected .training-level-slider::-moz-range-thumb {
      background: #ce93d8;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>后宫建筑系统设置</h1>

    <!-- 页面1：性别选择 -->
    <div id="page1" class="page active">
      <h2>选择您的性别</h2>
      <div class="option-grid">
        <div class="option-card" data-value="男">
          <h3>男</h3>
          <p>选择传统男性身份</p>
        </div>
        <div class="option-card" data-value="女">
          <h3>女</h3>
          <p>选择传统女性身份</p>
        </div>
        <div class="option-card" data-value="扶她">
          <h3>扶她</h3>
          <p>拥有男女双重特征</p>
        </div>
        <div class="option-card" data-value="男娘">
          <h3>男娘</h3>
          <p>拥有男性特征但具有女性气质</p>
        </div>
      </div>
      <div class="button-group">
        <button disabled style="visibility: hidden;">上一页</button>
        <button id="nextPage1">下一页</button>
      </div>
    </div>

    <!-- 页面2：身份和能力选择 -->
    <div id="page2" class="page">
      <h2>选择您的身份和特殊能力</h2>
      <div class="option-grid">
        <div class="option-card" data-value="普通人">
          <h3>普通人</h3>
          <p>没有特殊能力，但拥有卓越的领导才能和魅力</p>
        </div>
        <div class="option-card" data-value="普通大学生">
          <h3>普通大学生</h3>
          <p>年轻有活力，充满好奇心和学习能力，有无限潜力</p>
        </div>
        <div class="option-card" data-value="普通打工人">
          <h3>普通打工人</h3>
          <p>辛勤工作，意外获得后宫建设的机会，实现反转人生</p>
        </div>
        <div class="option-card" data-value="贵族/皇族">
          <h3>贵族/皇族</h3>
          <p>出身高贵，拥有丰富资源和权力，天生受人敬仰</p>
        </div>
        <div class="option-card" data-value="科学家">
          <h3>科学家</h3>
          <p>精通各种科技，能创造奇妙装置提升后宫体验</p>
        </div>
        <div class="option-card" data-value="神明">
          <h3>神明</h3>
          <p>拥有超凡能力，能实现妻子们的各种奇特愿望</p>
        </div>
        <div class="option-card" data-value="魔法师">
          <h3>魔法师</h3>
          <p>掌握各种魔法，能够施展强大的法术</p>
        </div>
        <div class="option-card" data-value="修仙者">
          <h3>修仙者</h3>
          <p>通过修炼获得超凡能力，寿命极长</p>
        </div>
        <div class="option-card" data-value="自定义">
          <h3>自定义</h3>
          <p>创建自己的身份和能力</p>
        </div>
      </div>
      <div id="customIdentityContainer" style="display: none;">
        <input type="text" id="customIdentity" class="custom-input" placeholder="描述您的自定义身份和能力...">
      </div>
      <div class="button-group">
        <button id="prevPage2">上一页</button>
        <button id="nextPage2">下一页</button>
      </div>
    </div>

    <!-- 页面3：建筑扩展选择 -->
    <div id="page3" class="page">
      <h2>选择欲望宫殿扩展</h2>
      <p>可以多选，主要区域是默认拥有的，选择想要扩展的设施</p>
      <div class="multi-select">
        <h3>1. 宫殿</h3>

        <h4>1.1 中央宫殿「主人领域」</h4>
        <div class="option-grid">
          <div class="option-card" data-value="主卧-智能情欲床">
            <h3>智能情欲床</h3>
            <p>超大型床铺能根据需求自动调整形状、硬度和温度，满足各种性爱体位</p>
          </div>
          <div class="option-card" data-value="主卧-催情氛围">
            <h3>催情氛围</h3>
            <p>床周围的隐藏凹槽可弹出调教道具，释放催情香雾或闪烁情欲魔法光线</p>
          </div>
          <div class="option-card" data-value="主卧-全景镜面">
            <h3>全景镜面</h3>
            <p>天花板和墙壁安装可调节的魔法镜，从任意角度反射床上缠绵的画面</p>
          </div>
          <div class="option-card" data-value="私人浴场-敏感温泉">
            <h3>敏感温泉</h3>
            <p>温泉水融入魔法成分，浸泡其中会让皮肤变得异常敏感，轻微触碰即可引发颤抖</p>
          </div>
          <div class="option-card" data-value="私人浴场-水下情趣">
            <h3>水下情趣</h3>
            <p>浴场边缘的凹槽内藏有水下振动玩具和触手装置，提供额外快感</p>
          </div>
          <div class="option-card" data-value="私人浴场-多人设计">
            <h3>多人设计</h3>
            <p>空间足以容纳多位妻子同时嬉戏，水中漂浮着催情花瓣，增添浪漫与淫荡氛围</p>
          </div>
          <div class="option-card" data-value="指令大厅-实时监控">
            <h3>实时监控</h3>
            <p>全息投影可播放妻子们的私密活动，随时放大细节欣赏</p>
          </div>
          <div class="option-card" data-value="指令大厅-意念操控">
            <h3>意念操控</h3>
            <p>通过语音或意念发布指令，直接传入妻子耳中，触发淫纹带来轻微快感</p>
          </div>
          <div class="option-card" data-value="量子浴场">
            <h3>量子浴场</h3>
            <p>利用量子技术制造的特殊浴池，水中纳米机器人按摩身体每一寸肌肤，注入催情因子</p>
          </div>
        </div>

        <h4>1.2 妻妾区「贤内殿」</h4>
        <div class="option-grid">
          <div class="option-card" data-value="奢华套房">
            <h3>奢华套房</h3>
            <p>每间套房内设有情趣吊床和隐藏式按摩装置，墙壁可投影性爱指令</p>
          </div>
          <div class="option-card" data-value="魔术肉棒练习室-动态演示">
            <h3>动态演示</h3>
            <p>墙上的道具能自动展示使用技巧，模拟主人的尺寸和节奏，让妻妾们练习得更加逼真</p>
          </div>
          <div class="option-card" data-value="魔术肉棒练习室-虚拟体验">
            <h3>虚拟体验</h3>
            <p>配备虚拟现实系统，妻妾可在模拟环境中练习口技或骑乘，提升实战能力</p>
          </div>
          <div class="option-card" data-value="伴侣休憩厅-私密角落">
            <h3>私密角落</h3>
            <p>厅内隐藏多个隔间，配有振动坐垫和自慰装置，供妻妾们在休息时释放欲望</p>
          </div>
          <div class="option-card" data-value="伴侣休憩厅-情感共鸣">
            <h3>情感共鸣</h3>
            <p>特殊装置让妻妾们共享彼此的情欲波动，增进亲密感</p>
          </div>
          <div class="option-card" data-value="知识花园">
            <h3>知识花园</h3>
            <p>巨大的全息图书馆，内有来自宇宙各文明的知识与艺术</p>
          </div>
        </div>

        <h4>1.3 性奴妻子区「欲望回廊」</h4>
        <div class="option-grid">
          <div class="option-card" data-value="多功能房间">
            <h3>多功能房间</h3>
            <p>墙壁可切换为镜面或道具架，床上内置震动和束缚功能，随时转为调教场所</p>
          </div>
          <div class="option-card" data-value="角色转换厅-智能魔法">
            <h3>智能魔法</h3>
            <p>魔法装置根据妻子情绪自动调整主奴角色，在性爱中随机切换，带来意外刺激</p>
          </div>
          <div class="option-card" data-value="角色转换厅-情境扮演">
            <h3>情境扮演</h3>
            <p>提供主人与奴隶、医生与病人等场景，妻子们在不同角色中体验支配与臣服</p>
          </div>
          <div class="option-card" data-value="束缚花园-动态束缚">
            <h3>动态束缚</h3>
            <p>束缚架能自动调整角度和紧度，配合花园中散发的催情花香，让被束缚的妻子情欲高涨</p>
          </div>
          <div class="option-card" data-value="束缚花园-户外调教">
            <h3>户外调教</h3>
            <p>花园中央设有露天调教台，可公开享用性奴妻子，其他成员围观助兴</p>
          </div>
          <div class="option-card" data-value="支配练习场-多样道具">
            <h3>多样道具</h3>
            <p>提供鞭子、蜡烛、口球等工具，性奴妻子可互相练习支配技巧</p>
          </div>
          <div class="option-card" data-value="支配练习场-虚拟对手">
            <h3>虚拟对手</h3>
            <p>虚拟现实系统模拟不同性格的对手，让练习更具挑战性</p>
          </div>
          <div class="option-card" data-value="角色置换舱">
            <h3>角色置换舱</h3>
            <p>利用神经接口技术可以快速实现支配与被支配身份的无缝切换</p>
          </div>
        </div>

        <h4>1.4 宠物性奴区「兽心园」</h4>
        <div class="option-grid">
          <div class="option-card" data-value="宠物窝-情趣升级">
            <h3>情趣升级</h3>
            <p>窝内铺设魔法地毯，能自动调节温度并轻微振动，窝中藏有触手玩具</p>
          </div>
          <div class="option-card" data-value="宠物窝-宠物姿态">
            <h3>宠物姿态</h3>
            <p>窝旁设有镜子，方便调整爬行或跪姿，保持最诱人的状态</p>
          </div>
          <div class="option-card" data-value="发情调节室-欲望控制">
            <h3>欲望控制</h3>
            <p>魔法装置可精准调整发情强度，让她们在主人面前持续处于高潮边缘</p>
          </div>
          <div class="option-card" data-value="发情调节室-感官引导">
            <h3>感官引导</h3>
            <p>室内播放催情音乐和影像，激发宠物性奴的野性本能</p>
          </div>
          <div class="option-card" data-value="宠物游乐场-情趣设施">
            <h3>情趣设施</h3>
            <p>旋转木马配有振动座椅，秋千融入束缚绳，爬架顶部设有按摩装置</p>
          </div>
          <div class="option-card" data-value="宠物游乐场-互动奖励">
            <h3>互动奖励</h3>
            <p>游乐场定期举行游戏，胜者可获得与主人的独处机会</p>
          </div>
          <div class="option-card" data-value="宠物休眠舱">
            <h3>宠物休眠舱</h3>
            <p>形似豪华宠物窝，内置按摩与催眠功能</p>
          </div>
        </div>

        <h4>1.5 公共区域</h4>
        <div class="option-grid">
          <div class="option-card" data-value="四季花园-户外情趣">
            <h3>户外情趣</h3>
            <p>草地上隐藏振动地垫和自动按摩装置，随时可与妻子们在此缠绵</p>
          </div>
          <div class="option-card" data-value="四季花园-催情自然">
            <h3>催情自然</h3>
            <p>花卉散发的香气能让人情欲高涨，树丛间设有隐秘的性爱窝点</p>
          </div>
          <div class="option-card" data-value="魔法温泉-极致敏感">
            <h3>极致敏感</h3>
            <p>温泉水融入增强性欲的魔法成分，泡浴时身体每一寸都变得敏感无比</p>
          </div>
          <div class="option-card" data-value="魔法温泉-按摩升级">
            <h3>按摩升级</h3>
            <p>池边装置可提供深层按摩，特别针对性感带，让妻子们在水中呻吟不止</p>
          </div>
          <div class="option-card" data-value="欲望餐厅-催情美食">
            <h3>催情美食</h3>
            <p>食物能提升性能力并激发欲望，餐桌下方配有可调节高度的座椅，方便隐秘性爱</p>
          </div>
          <div class="option-card" data-value="欲望餐厅-侍奉用餐">
            <h3>侍奉用餐</h3>
            <p>妻子们可跪在桌下为主人服务，增添用餐乐趣</p>
          </div>
          <div class="option-card" data-value="幻境游乐场-逼真场景">
            <h3>逼真场景</h3>
            <p>提供古代后宫、未来性爱舱等幻境，可扮演不同角色尽情交欢</p>
          </div>
          <div class="option-card" data-value="幻境游乐场-互动挑战">
            <h3>互动挑战</h3>
            <p>设有性爱游戏，如耐力比拼或技巧竞赛，胜者获奖励</p>
          </div>
          <div class="option-card" data-value="神秘宝库-稀有道具">
            <h3>稀有道具</h3>
            <p>收藏自动适应身体的假阳具、模拟真实高潮的按摩棒等，每周展示新品</p>
          </div>
          <div class="option-card" data-value="星际花园穹顶">
            <h3>星际花园穹顶</h3>
            <p>巨大的生物穹顶，种植宇宙各地奇异植物，地面隐藏各种快感触发装置</p>
          </div>
        </div>

        <h4>1.6 特殊功能设施</h4>
        <div class="option-grid">
          <div class="option-card" data-value="淫纹铭刻室-高潮仪式">
            <h3>高潮仪式</h3>
            <p>刻画淫纹时，妻子们会被魔法触手刺激至连续高潮，过程庄严又淫靡</p>
          </div>
          <div class="option-card" data-value="淫纹铭刻室-定制纹身">
            <h3>定制纹身</h3>
            <p>淫纹形状可根据主人喜好设计，刻画后永久提升敏感度</p>
          </div>
          <div class="option-card" data-value="魔力温床-触手爱抚">
            <h3>触手爱抚</h3>
            <p>床上的魔力触手能根据妻子状态调整刺激频率，甚至深入体内带来极致快感</p>
          </div>
          <div class="option-card" data-value="魔力温床-情欲恢复">
            <h3>情欲恢复</h3>
            <p>恢复魔力的同时激发性欲，让妻子们随时保持最佳状态</p>
          </div>
          <div class="option-card" data-value="欲望共鸣厅-群体快感">
            <h3>群体快感</h3>
            <p>厅内空间放大并共享所有人的快感，适合多人狂欢</p>
          </div>
          <div class="option-card" data-value="欲望共鸣厅-情境切换">
            <h3>情境切换</h3>
            <p>可模拟调教展示或群交派对，满足不同需求</p>
          </div>
          <div class="option-card" data-value="记忆剧场-全息重现">
            <h3>全息重现</h3>
            <p>以全息形式回放主人与妻子的性爱记忆，观众仿佛身临其境</p>
          </div>
          <div class="option-card" data-value="记忆剧场-技巧学习">
            <h3>技巧学习</h3>
            <p>分析影像中的动作，提供提升建议</p>
          </div>
          <div class="option-card" data-value="淫纹植入舱">
            <h3>淫纹植入舱</h3>
            <p>利用纳米技术和量子刻印植入专属淫纹，过程中神经系统被刺激产生持续高潮</p>
          </div>
        </div>

        <h4>1.7 调教区</h4>
        <div class="option-grid">
          <div class="option-card" data-value="调教室-高级道具">
            <h3>高级道具</h3>
            <p>墙上的调教架摆满魔法道具，包括自动调整大小的假阳具、模拟真实触感的振动棒等</p>
          </div>
          <div class="option-card" data-value="调教室-智能调教台">
            <h3>智能调教台</h3>
            <p>调教台可根据妻子的反应自动调节束缚姿势和刺激强度，记录高潮次数并优化体验</p>
          </div>
          <div class="option-card" data-value="调教室-公开记录">
            <h3>公开记录</h3>
            <p>魔法镜不仅记录调教过程，还能将影像传输至后宫公共区域，供其他妻子观摩学习</p>
          </div>
          <div class="option-card" data-value="快感实验室">
            <h3>快感实验室</h3>
            <p>搭载最先进性爱科技，墙壁内藏机械臂和触手状装置，可进行精确控制的多点刺激</p>
          </div>
          <div class="option-card" data-value="感官共享室">
            <h3>感官共享室</h3>
            <p>利用脑波同步技术，让所有参与者能感受彼此的快感，常用于群体活动</p>
          </div>
        </div>

        <h4>自定义区域</h4>
        <div class="option-card" data-value="自定义区域">
          <h3>自定义区域</h3>
          <p>创建您的专属建筑区域</p>
        </div>
      </div>
      <div id="customBuildingContainer" style="display: none;">
        <select id="customAreaType" class="custom-select">
          <option value="">请选择区域类型...</option>
          <option value="中央宫殿">1.1 中央宫殿「主人领域」</option>
          <option value="妻妾区">1.2 妻妾区「贤内殿」</option>
          <option value="性奴妻子区">1.3 性奴妻子区「欲望回廊」</option>
          <option value="宠物性奴区">1.4 宠物性奴区「兽心园」</option>
          <option value="公共区域">1.5 公共区域</option>
          <option value="特殊功能">1.6 特殊功能设施</option>
          <option value="调教区">1.7 调教区</option>
        </select>
        <input type="text" id="customBuildingName" class="custom-input" placeholder="区域名称...">
        <input type="text" id="customBuilding" class="custom-input" placeholder="描述您的自定义建筑区域功能...">
      </div>
      <div class="button-group">
        <button id="prevPage3">上一页</button>
        <button id="nextPage3">下一页</button>
      </div>
    </div>

    <!-- 页面4：初始妻子选择 -->
    <div id="page4" class="page">
      <h2>选择初始妻子（最多选择两位）</h2>
      <div class="wife-grid" id="wifeGrid">
        <!-- 这里会通过JavaScript动态填充妻子列表 -->
      </div>
      <div class="option-card" data-value="自定义妻子" id="customWifeCard">
        <h3>自定义妻子</h3>
        <p>创建您自己的理想妻子</p>
      </div>
      <div id="customWifeContainer" style="display: none;">
        <input type="text" id="customWifeName" class="custom-input" placeholder="妻子的名字...">
        <input type="text" id="customWifeDesc" class="custom-input" placeholder="描述妻子的特点、外貌和性格...">
        <select id="customWifeStage" class="custom-input">
          ${trainingStages.map(stage =>
          `<option value="${stage.value}">${stage.label}</option>`
          ).join('')}
        </select>
        <div class="training-level-container">
          <label id="customTrainingLevelLabel">调教度: 0</label>
          <input type="range" id="customTrainingLevel" class="training-level-slider" min="0" max="100" value="0">
        </div>
      </div>
      <div class="button-group">
        <button id="prevPage4">上一页</button>
        <button id="nextPage4">下一页</button>
      </div>
    </div>

    <!-- 页面5：世界观选择 -->
    <div id="page5" class="page">
      <h2>选择初始世界观</h2>
      <div class="option-grid">
        <div class="option-card" data-value="现实世界观">
          <h3>现实世界观</h3>
          <p>基于现实世界但融入魔法与科技的秘密</p>
        </div>
        <div class="option-card" data-value="fate世界观">
          <h3>Fate世界观</h3>
          <p>魔术、英灵与圣杯战争的世界</p>
        </div>
        <div class="option-card" data-value="崩坏星穹铁道世界观">
          <h3>崩坏星穹铁道世界观</h3>
          <p>星际冒险与科技魔法的融合</p>
        </div>
        <div class="option-card" data-value="原神世界观">
          <h3>原神世界观</h3>
          <p>七神与元素力量的奇幻世界</p>
        </div>
        <div class="option-card" data-value="龙族世界观">
          <h3>龙族世界观</h3>
          <p>现代与神话交织，龙族与人类共存</p>
        </div>
        <div class="option-card" data-value="战锤40k">
          <h3>战锤40k</h3>
          <p>在无尽的宇宙中，唯有战争永恒</p>
        </div>
        <div class="option-card" data-value="仙剑奇侠传世界观">
          <h3>仙剑奇侠传世界观</h3>
          <p>红尘侠少们在爱恨纠葛与六界轮回间求索</p>
        </div>
        <div class="option-card" data-value="斗破苍穹世界观">
          <h3>斗破苍穹世界观</h3>
          <p>斗气大陆，强者为尊，吞噬异火，碎裂苍穹</p>
        </div>
        <div class="option-card" data-value="哈利波特世界观">
          <h3>哈利波特世界观</h3>
          <p>躲在麻瓜视线之外的魔法界与霍格沃茨学院</p>
        </div>
        <div class="option-card" data-value="权力的游戏世界观">
          <h3>权力的游戏世界观</h3>
          <p>维斯特洛大陆上的权谋与生存</p>
        </div>
        <div class="option-card" data-value="沙丘世界观">
          <h3>沙丘世界观</h3>
          <p>黄沙覆盖的行星与珍贵香料资源</p>
        </div>
        <div class="option-card" data-value="三体世界观">
          <h3>三体世界观</h3>
          <p>人类与三体文明的星际生存博弈</p>
        </div>
        <div class="option-card" data-value="进击的巨人世界观">
          <h3>进击的巨人世界观</h3>
          <p>高墙之内的人类与墙外巨人的对抗</p>
        </div>
        <div class="option-card" data-value="星球大战世界观">
          <h3>星球大战世界观</h3>
          <p>绝地武士与原力的银河系冒险</p>
        </div>
        <div class="option-card" data-value="黑客帝国世界观">
          <h3>黑客帝国世界观</h3>
          <p>在真实与虚幻矩阵之间的人类觉醒</p>
        </div>
        <div class="option-card" data-value="SCP基金会世界观">
          <h3>SCP基金会世界观</h3>
          <p>收容、控制与保护异常物品与现象</p>
        </div>
        <div class="option-card" data-value="鲁鲁修世界观">
          <h3>鲁鲁修世界观</h3>
          <p>少年少女驾驶机甲，为理想与正义而战</p>
        </div>
        <div class="option-card" data-value="末世废土世界观">
          <h3>末世废土世界观</h3>
          <p>文明残骸上挣扎求生的人类</p>
        </div>
        <div class="option-card" data-value="巨大机器人世界观">
          <h3>巨大机器人世界观</h3>
          <p>驾驶钢铁巨神决定星球命运的战斗</p>
        </div>
        <div class="option-card" data-value="都市奇幻世界观">
          <h3>都市奇幻世界观</h3>
          <p>现代都市下隐藏的魔法与异能</p>
        </div>
        <div class="option-card" data-value="恐怖怪谈世界观">
          <h3>恐怖怪谈世界观</h3>
          <p>面对未知恐惧与诅咒的人类</p>
        </div>
        <div class="option-card" data-value="自定义世界观">
          <h3>自定义世界观</h3>
          <p>创建您独特的世界设定</p>
        </div>
      </div>
      <div id="customWorldContainer" style="display: none;">
        <input type="text" id="customWorld" class="custom-input" placeholder="描述您的自定义世界观...">
      </div>
      <div class="button-group">
        <button id="prevPage5">上一页</button>
        <button id="nextPage5">下一页</button>
      </div>
    </div>

    <!-- 页面6：总结页 -->
    <div id="page6" class="page">
      <h2>您的后宫建筑系统设置总结</h2>
      <div class="summary-container" id="summaryContainer">
        <!-- 这里会通过JavaScript动态填充总结信息 -->
      </div>
      <div class="button-group">
        <button id="prevPage6">上一页</button>
        <button id="sendToChat">发送到聊天</button>
      </div>
    </div>

    <script>
      // 妻子的调教阶段选项
      const trainingStages = [
        { value: "untrained", label: "未被调教" },
        { value: "wife", label: "已被调教为妻妾" },
        { value: "slave", label: "已被调教为性奴妻子" },
        { value: "pet", label: "已被调教为宠物性奴" }
      ];

      // 修改全局变量存储用户选择，添加调教阶段信息
      const userChoices = {
        gender: '',
        identity: '',
        customIdentity: '',
        buildings: [],
        customBuilding: '',
        customBuildingName: '',
        customAreaType: '',
        wives: [], // 现在存储对象数组，包含名字、调教阶段和调教度
        customWife: { name: '', description: '', stage: '', trainingLevel: 0 },
        world: '',
        customWorld: ''
      };

      // 妻子列表
      const wifeList = [
        "CC", "Marie Antoinette Alter", "三月七", "上杉绘梨衣", "两仪式",
        "久远寺有珠", "云璃", "亚丝娜", "伊什塔尔", "伊莉雅",
        "伊蕾娜", "克洛伊", "刘芹", "加藤惠", "劳拉",
        "千织", "卡莲", "司南秀", "唐雪见", "埃列什基伽勒(Beast)",
        "夏娜", "夏弥", "太空伊什塔尔", "妮露", "安南秀",
        "安妮公主", "小龙女", "尼托克丽丝", "尼禄", "布伦希尔德",
        "布洛妮娅", "希儿", "帕尔瓦蒂", "帝皇", "御坂美琴",
        "心海", "慕容紫英", "提亚马特", "摩根", "斯卡哈",
        "李忆如", "杜尔迦", "林月如", "柳梦璃", "柳雪琴",
        "梅莉", "樱岛麻衣", "沙条爱歌", "灵砂", "爱丽丝",
        "爱丽丝菲尔", "爱尔奎特·布伦史塔德", "由比滨结衣", "白井黑子", "白贞德",
        "皇女", "符玄", "美游", "艾莉莎", "艾蕾",
        "艾达·王", "芙宁娜", "芭芭拉", "花火", "苍崎橙子",
        "苍崎青子", "英莉莉", "茵蒂克丝", "葛饰北斋", "蒂法",
        "藤丸立香", "虞美人", "赫敏", "赵灵儿", "远坂凛",
        "迦摩", "间桐樱", "阮梅", "阿奴", "阿尔托莉雅",
        "阿尔托莉雅(alter)", "阿尔托莉雅(lancer)", "阿蒂拉", "陈墨瞳", "雪之下雪乃",
        "霞之丘诗羽", "韩菱纱", "食蜂操祈", "黑天鹅", "黑贞德", "龙葵"
      ];

      // 初始化妻子列表
      function initWifeList() {
        const wifeGrid = document.getElementById('wifeGrid');
        wifeList.forEach(wife => {
          const wifeCard = document.createElement('div');
          wifeCard.className = 'wife-card';
          wifeCard.dataset.value = wife;

          // 创建妻子名字显示
          const wifeName = document.createElement('div');
          wifeName.textContent = wife;
          wifeCard.appendChild(wifeName);

          // 创建调教阶段选择下拉框
          const stageSelect = document.createElement('select');
          stageSelect.className = 'training-stage-select';
          stageSelect.style.display = 'none'; // 初始隐藏

          // 添加调教阶段选项
          trainingStages.forEach(stage => {
            const option = document.createElement('option');
            option.value = stage.value;
            option.textContent = stage.label;
            stageSelect.appendChild(option);
          });

          // 创建调教度滑动条容器
          const trainingLevelContainer = document.createElement('div');
          trainingLevelContainer.className = 'training-level-container';
          trainingLevelContainer.style.display = 'none';

          // 创建调教度标签
          const trainingLevelLabel = document.createElement('label');
          trainingLevelLabel.textContent = '调教度: 0';

          // 创建调教度滑动条
          const trainingLevelSlider = document.createElement('input');
          trainingLevelSlider.type = 'range';
          trainingLevelSlider.min = '0';
          trainingLevelSlider.max = '100';
          trainingLevelSlider.value = '0';
          trainingLevelSlider.className = 'training-level-slider';

          trainingLevelContainer.appendChild(trainingLevelLabel);
          trainingLevelContainer.appendChild(trainingLevelSlider);

          wifeCard.appendChild(stageSelect);
          wifeCard.appendChild(trainingLevelContainer);
          wifeGrid.appendChild(wifeCard);

          wifeCard.addEventListener('click', function (e) {
            // 如果点击的是select元素或滑动条，不执行卡片的选择/取消选择操作
            if (e.target.tagName === 'SELECT' || e.target.tagName === 'INPUT') return;

            if (this.classList.contains('selected')) {
              this.classList.remove('selected');
              stageSelect.style.display = 'none';
              trainingLevelContainer.style.display = 'none';
              userChoices.wives = userChoices.wives.filter(w => w.name !== wife);
            } else {
              if (userChoices.wives.length < 2) {
                this.classList.add('selected');
                stageSelect.style.display = 'block';
                trainingLevelContainer.style.display = 'block';
                userChoices.wives.push({
                  name: wife,
                  stage: stageSelect.value,
                  trainingLevel: parseInt(trainingLevelSlider.value)
                });
              } else {
                alert('您最多只能选择两位初始妻子');
              }
            }
          });

          // 监听调教阶段的变化
          stageSelect.addEventListener('change', function () {
            const wifeIndex = userChoices.wives.findIndex(w => w.name === wife);
            if (wifeIndex !== -1) {
              userChoices.wives[wifeIndex].stage = this.value;
            }
          });

          // 监听调教度滑动条的变化
          trainingLevelSlider.addEventListener('input', function () {
            const wifeIndex = userChoices.wives.findIndex(w => w.name === wife);
            if (wifeIndex !== -1) {
              userChoices.wives[wifeIndex].trainingLevel = parseInt(this.value);
              trainingLevelLabel.textContent = `调教度: ${this.value}`;
            }
          });
        });
      }

      // 更新自定义妻子部分
      document.getElementById('customWifeContainer').innerHTML = `
        <input type="text" id="customWifeName" class="custom-input" placeholder="妻子的名字...">
        <input type="text" id="customWifeDesc" class="custom-input" placeholder="描述妻子的特点、外貌和性格...">
        <select id="customWifeStage" class="custom-input">
          ${trainingStages.map(stage =>
        `<option value="${stage.value}">${stage.label}</option>`
      ).join('')}
        </select>
        <div class="training-level-container">
          <label id="customTrainingLevelLabel">调教度: 0</label>
          <input type="range" id="customTrainingLevel" class="training-level-slider" min="0" max="100" value="0">
        </div>
      `;

      // 更新总结信息显示
      function updateSummary() {
        const summaryContainer = document.getElementById('summaryContainer');

        let buildingsList = userChoices.buildings.join('、');
        if (userChoices.customBuilding) {
          let customBuildingText = '';
          if (userChoices.customAreaType && userChoices.customBuildingName) {
            customBuildingText = `${userChoices.customAreaType}「${userChoices.customBuildingName}」: ${userChoices.customBuilding}`;
          } else {
            customBuildingText = userChoices.customBuilding;
          }
          buildingsList += (buildingsList ? '、' : '') + customBuildingText;
        }

        let wivesList = userChoices.wives.map(wife =>
          `${wife.name}(${trainingStages.find(stage => stage.value === wife.stage)?.label || '未选择状态'}, 调教度:${wife.trainingLevel})`
        ).join('、');

        if (userChoices.customWife.name) {
          const customWifeStage = trainingStages.find(stage => stage.value === userChoices.customWife.stage)?.label || '未选择状态';
          wivesList += (wivesList ? '、' : '') +
            `${userChoices.customWife.name}(${customWifeStage}, 调教度:${userChoices.customWife.trainingLevel})${userChoices.customWife.description ? ` - ${userChoices.customWife.description}` : ''}`;
        }

        let identityText = userChoices.identity;
        if (userChoices.identity === '自定义' && userChoices.customIdentity) {
          identityText = userChoices.customIdentity;
        }

        let worldText = userChoices.world;
        if (userChoices.world === '自定义世界观' && userChoices.customWorld) {
          worldText = userChoices.customWorld;
        }

        let trainingLevels = '';
        userChoices.wives.forEach(wife => {
          trainingLevels += `@${wife.name}_调教度=${wife.trainingLevel}@\n`;
        });
        if (userChoices.customWife.name) {
          trainingLevels += `@${userChoices.customWife.name}_调教度=${userChoices.customWife.trainingLevel}@\n`;
        }

        let summaryHTML = `
      <div class="summary-section">
        <h3>性别:</h3>
        <p>${userChoices.gender}</p>
      </div>
      <div class="summary-section">
        <h3>身份和特殊能力:</h3>
        <p>${identityText}</p>
      </div>
      <div class="summary-section">
        <h3>建筑扩展:</h3>
        <p>${buildingsList || '无'}</p>
      </div>
      <div class="summary-section">
        <h3>初始妻子:</h3>
        <p>${wivesList || '无'}</p>
        ${userChoices.customWife.description ? `<p>自定义妻子描述: ${userChoices.customWife.description}</p>` : ''}
      </div>
      <div class="summary-section">
        <h3>世界观:</h3>
        <p>${worldText}</p>
      </div>
    `;

        summaryContainer.innerHTML = summaryHTML;
      }

      // 构建最终数据
      function buildFinalData() {
        let buildingsList = userChoices.buildings.join('、');
        if (userChoices.customBuilding) {
          let customBuildingText = '';
          if (userChoices.customAreaType && userChoices.customBuildingName) {
            customBuildingText = `${userChoices.customAreaType}「${userChoices.customBuildingName}」: ${userChoices.customBuilding}`;
          } else {
            customBuildingText = userChoices.customBuilding;
          }
          buildingsList += (buildingsList ? '、' : '') + customBuildingText;
        }

        let wivesList = userChoices.wives.map(wife =>
          `${wife.name}(${trainingStages.find(stage => stage.value === wife.stage)?.label || '未选择状态'}, 调教度:${wife.trainingLevel})`
        ).join('、');

        if (userChoices.customWife.name) {
          const customWifeStage = trainingStages.find(stage => stage.value === userChoices.customWife.stage)?.label || '未选择状态';
          wivesList += (wivesList ? '、' : '') +
            `${userChoices.customWife.name}(${customWifeStage}, 调教度:${userChoices.customWife.trainingLevel})${userChoices.customWife.description ? ` - ${userChoices.customWife.description}` : ''}`;
        }

        let identityText = userChoices.identity;
        if (userChoices.identity === '自定义' && userChoices.customIdentity) {
          identityText = userChoices.customIdentity;
        }

        let worldText = userChoices.world;
        if (userChoices.world === '自定义世界观' && userChoices.customWorld) {
          worldText = userChoices.customWorld;
        }

        // 构建调教度变量
        let trainingLevels = '';
        userChoices.wives.forEach(wife => {
          trainingLevels += `@${wife.name}_调教度=${wife.trainingLevel}@\n`;
        });
        if (userChoices.customWife.name) {
          trainingLevels += `@${userChoices.customWife.name}_调教度=${userChoices.customWife.trainingLevel}@\n`;
        }

        return `# 我的后宫设置

## 基本信息
- <user>性别: ${userChoices.gender}
- <user>身份: ${identityText}
- 世界观: ${worldText}

## 建筑扩展
${buildingsList || '无'}

## 初始妻子
${wivesList || '无'}

${trainingLevels}
突然有一天，<user>以前的生活被打破了，因为<user>今天遇到了${wivesList || '无'}和无限欲望星舰！`;
      }

      // 发送到聊天功能
      function sendToChat() {
        const finalData = buildFinalData();

        // 使用slash命令发送消息并触发AI响应
        triggerSlash(`/send ${finalData}`);
        triggerSlash('/trigger');
      }


      // 页面导航函数
      function navigateTo(pageId) {
        // 隐藏所有页面
        document.querySelectorAll('.page').forEach(page => {
          page.classList.remove('active');
        });

        // 显示目标页面
        document.getElementById(pageId).classList.add('active');

        // 如果是最后一页，更新总结
        if (pageId === 'page6') {
          updateSummary();
        }
      }

      // 初始化事件监听
      window.addEventListener('DOMContentLoaded', function () {
        // 初始化妻子列表
        initWifeList();

        // 页面1：性别选择
        document.querySelectorAll('#page1 .option-card').forEach(card => {
          card.addEventListener('click', function () {
            document.querySelectorAll('#page1 .option-card').forEach(c => c.classList.remove('selected'));
            this.classList.add('selected');
            userChoices.gender = this.dataset.value;
          });
        });

        document.getElementById('nextPage1').addEventListener('click', function () {
          if (!userChoices.gender) {
            alert('请选择您的性别');
            return;
          }
          navigateTo('page2');
        });

        // 页面2：身份和能力选择
        document.querySelectorAll('#page2 .option-card').forEach(card => {
          card.addEventListener('click', function () {
            document.querySelectorAll('#page2 .option-card').forEach(c => c.classList.remove('selected'));
            this.classList.add('selected');
            userChoices.identity = this.dataset.value;

            if (this.dataset.value === '自定义') {
              document.getElementById('customIdentityContainer').style.display = 'block';
            } else {
              document.getElementById('customIdentityContainer').style.display = 'none';
            }
          });
        });

        document.getElementById('customIdentity').addEventListener('input', function () {
          userChoices.customIdentity = this.value;
        });

        document.getElementById('prevPage2').addEventListener('click', function () {
          navigateTo('page1');
        });

        document.getElementById('nextPage2').addEventListener('click', function () {
          if (!userChoices.identity) {
            alert('请选择您的身份和特殊能力');
            return;
          }
          if (userChoices.identity === '自定义' && !userChoices.customIdentity) {
            alert('请描述您的自定义身份和能力');
            return;
          }
          navigateTo('page3');
        });

        // 页面3：建筑扩展选择
        document.querySelectorAll('#page3 .option-card').forEach(card => {
          card.addEventListener('click', function () {
            if (this.dataset.value === '自定义区域') {
              if (this.classList.contains('selected')) {
                this.classList.remove('selected');
                document.getElementById('customBuildingContainer').style.display = 'none';
                userChoices.customBuilding = '';
                userChoices.customBuildingName = '';
                userChoices.customAreaType = '';
              } else {
                this.classList.add('selected');
                document.getElementById('customBuildingContainer').style.display = 'block';
              }
              return;
            }
            if (this.classList.contains('selected')) {
              this.classList.remove('selected');
              userChoices.buildings = userChoices.buildings.filter(b => b !== this.dataset.value);
            } else {
              this.classList.add('selected');
              userChoices.buildings.push(this.dataset.value);
            }
          });
        });

        document.getElementById('customAreaType').addEventListener('change', function () {
          userChoices.customAreaType = this.value;
        });

        document.getElementById('customBuildingName').addEventListener('input', function () {
          userChoices.customBuildingName = this.value;
        });

        document.getElementById('customBuilding').addEventListener('input', function () {
          userChoices.customBuilding = this.value;
        });

        document.getElementById('prevPage3').addEventListener('click', function () {
          navigateTo('page2');
        });

        document.getElementById('nextPage3').addEventListener('click', function () {
          navigateTo('page4');
        });

        // 页面4：初始妻子选择
        document.getElementById('customWifeCard').addEventListener('click', function () {
          if (this.classList.contains('selected')) {
            this.classList.remove('selected');
            document.getElementById('customWifeContainer').style.display = 'none';
            userChoices.customWife = { name: '', description: '', stage: '', trainingLevel: 0 };
          } else {
            this.classList.add('selected');
            document.getElementById('customWifeContainer').style.display = 'block';
          }
        });

        document.getElementById('customWifeName').addEventListener('input', function () {
          userChoices.customWife.name = this.value;
        });

        document.getElementById('customWifeDesc').addEventListener('input', function () {
          userChoices.customWife.description = this.value;
        });

        document.getElementById('customWifeStage').addEventListener('change', function () {
          userChoices.customWife.stage = this.value;
        });

        document.getElementById('customTrainingLevel').addEventListener('input', function () {
          userChoices.customWife.trainingLevel = parseInt(this.value);
        });

        document.getElementById('prevPage4').addEventListener('click', function () {
          navigateTo('page3');
        });

        document.getElementById('nextPage4').addEventListener('click', function () {
          if (document.getElementById('customWifeCard').classList.contains('selected')) {
            if (!userChoices.customWife.name) {
              alert('请输入自定义妻子的名字');
              return;
            }
            if (!userChoices.customWife.stage) {
              alert('请选择自定义妻子的调教阶段');
              return;
            }
          }
          navigateTo('page5');
        });

        // 页面5：世界观选择
        document.querySelectorAll('#page5 .option-card').forEach(card => {
          card.addEventListener('click', function () {
            document.querySelectorAll('#page5 .option-card').forEach(c => c.classList.remove('selected'));
            this.classList.add('selected');
            userChoices.world = this.dataset.value;

            if (this.dataset.value === '自定义世界观') {
              document.getElementById('customWorldContainer').style.display = 'block';
            } else {
              document.getElementById('customWorldContainer').style.display = 'none';
            }
          });
        });

        document.getElementById('customWorld').addEventListener('input', function () {
          userChoices.customWorld = this.value;
        });

        document.getElementById('prevPage5').addEventListener('click', function () {
          navigateTo('page4');
        });

        document.getElementById('nextPage5').addEventListener('click', function () {
          if (!userChoices.world) {
            alert('请选择初始世界观');
            return;
          }
          if (userChoices.world === '自定义世界观' && !userChoices.customWorld) {
            alert('请描述您的自定义世界观');
            return;
          }
          navigateTo('page6');
        });

        // 页面6：总结页
        document.getElementById('prevPage6').addEventListener('click', function () {
          navigateTo('page5');
        });

        document.getElementById('sendToChat').addEventListener('click', function () {
          sendToChat();
        });
      });
    </script>
</body>

</html>
```