!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ReporterPb=t()}(this,(function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}function t(e,t,i,r,n,o,a){try{var s=e[o](a),u=s.value}catch(e){return void i(e)}s.done?t(u):Promise.resolve(u).then(r,n)}function i(e){return function(){var i=this,r=arguments;return new Promise((function(n,o){var a=e.apply(i,r);function s(e){t(a,n,o,s,u,"next",e)}function u(e){t(a,n,o,s,u,"throw",e)}s(void 0)}))}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function o(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=v(e))||t){i&&(e=i);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}function s(e,t,i){return(t=f(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){s(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(){c=function(){return t};var e,t={},i=Object.prototype,r=i.hasOwnProperty,n=Object.defineProperty||function(e,t,i){e[t]=i.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,i){return e[t]=i}}function d(e,t,i,r){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new j(r||[]);return n(a,"_invoke",{value:V(e,i,s)}),a}function f(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",v="suspendedYield",h="executing",w="completed",b={};function m(){}function g(){}function y(){}var _={};l(_,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==i&&r.call(x,a)&&(_=x);var F=y.prototype=m.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function i(n,o,a,s){var u=f(e[n],e,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==typeof c&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return i("throw",e,a,s)}))}s(u.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function V(t,i,r){var n=p;return function(o,a){if(n===h)throw Error("Generator is already running");if(n===w){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=P(s,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=w,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var l=f(t,i,r);if("normal"===l.type){if(n=r.done?w:v,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=w,r.method="throw",r.arg=l.arg)}}}function P(t,i){var r=i.method,n=t.iterator[r];if(n===e)return i.delegate=null,"throw"===r&&t.iterator.return&&(i.method="return",i.arg=e,P(t,i),"throw"===i.method)||"return"!==r&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=f(n,t.iterator,i.arg);if("throw"===o.type)return i.method="throw",i.arg=o.arg,i.delegate=null,b;var a=o.arg;return a?a.done?(i[t.resultName]=a.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,b):a:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,b)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function M(t){if(t||""===t){var i=t[a];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function i(){for(;++n<t.length;)if(r.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=e,i.done=!0,i};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return g.prototype=y,n(F,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:g,configurable:!0}),g.displayName=l(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(F),e},t.awrap=function(e){return{__await:e}},S(E.prototype),l(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,i,r,n,o){void 0===o&&(o=Promise);var a=new E(d(e,i,r,n),o);return t.isGeneratorFunction(i)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(F),l(F,u,"Generator"),l(F,a,(function(){return this})),l(F,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),i=[];for(var r in t)i.push(r);return i.reverse(),function e(){for(;i.length;){var r=i.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function n(r,n){return s.type="throw",s.arg=t,i.next=r,n&&(i.method="next",i.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),O(i),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var r=i.completion;if("throw"===r.type){var n=r.arg;O(i)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:M(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function d(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(t,i){if(t){if("string"==typeof t)return e(t,i);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,i):void 0}}function h(e){var t=this.constructor;return this.then((function(i){return t.resolve(e()).then((function(){return i}))}),(function(i){return t.resolve(e()).then((function(){return t.reject(i)}))}))}function w(e){return new this((function(t,i){if(!e||void 0===e.length)return i(new TypeError(p(e)+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var n=r.length;function o(e,i){if(i&&("object"===p(i)||"function"==typeof i)){var a=i.then;if("function"==typeof a)return void a.call(i,(function(t){o(e,t)}),(function(i){r[e]={status:"rejected",reason:i},0==--n&&t(r)}))}r[e]={status:"fulfilled",value:i},0==--n&&t(r)}for(var a=0;a<r.length;a++)o(a,r[a])}))}function b(e,t){this.name="AggregateError",this.errors=e,this.message=t||""}function m(e){var t=this;return new t((function(i,r){if(!e||void 0===e.length)return r(new TypeError("Promise.any accepts an array"));var n=Array.prototype.slice.call(e);if(0===n.length)return r();for(var o=[],a=0;a<n.length;a++)try{t.resolve(n[a]).then(i).catch((function(e){o.push(e),o.length===n.length&&r(new b(o,"All promises were rejected"))}))}catch(e){r(e)}}))}b.prototype=Error.prototype;var g=setTimeout;function y(e){return Boolean(e&&void 0!==e.length)}function _(){}function k(e){if(!(this instanceof k))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],P(e,this)}function x(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,k._immediateFn((function(){var i=1===e._state?t.onFulfilled:t.onRejected;if(null!==i){var r;try{r=i(e._value)}catch(e){return void S(t.promise,e)}F(t.promise,r)}else(1===e._state?F:S)(t.promise,e._value)}))):e._deferreds.push(t)}function F(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===p(t)||"function"==typeof t)){var i=t.then;if(t instanceof k)return e._state=3,e._value=t,void E(e);if("function"==typeof i)return void P((r=i,n=t,function(){r.apply(n,arguments)}),e)}e._state=1,e._value=t,E(e)}catch(t){S(e,t)}var r,n}function S(e,t){e._state=2,e._value=t,E(e)}function E(e){2===e._state&&0===e._deferreds.length&&k._immediateFn((function(){e._handled||k._unhandledRejectionFn(e._value)}));for(var t=0,i=e._deferreds.length;t<i;t++)x(e,e._deferreds[t]);e._deferreds=null}function V(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function P(e,t){var i=!1;try{e((function(e){i||(i=!0,F(t,e))}),(function(e){i||(i=!0,S(t,e))}))}catch(e){if(i)return;i=!0,S(t,e)}}k.prototype.catch=function(e){return this.then(null,e)},k.prototype.then=function(e,t){var i=new this.constructor(_);return x(this,new V(e,t,i)),i},k.prototype.finally=h,k.all=function(e){return new k((function(t,i){if(!y(e))return i(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var n=r.length;function o(e,a){try{if(a&&("object"===p(a)||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){o(e,t)}),i)}r[e]=a,0==--n&&t(r)}catch(e){i(e)}}for(var a=0;a<r.length;a++)o(a,r[a])}))},k.any=m,k.allSettled=w,k.resolve=function(e){return e&&"object"===p(e)&&e.constructor===k?e:new k((function(t){t(e)}))},k.reject=function(e){return new k((function(t,i){i(e)}))},k.race=function(e){return new k((function(t,i){if(!y(e))return i(new TypeError("Promise.race accepts an array"));for(var r=0,n=e.length;r<n;r++)k.resolve(e[r]).then(t,i)}))},k._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){g(e,0)},k._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var T=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"function"!=typeof T.Promise?T.Promise=k:(T.Promise.prototype.finally||(T.Promise.prototype.finally=h),T.Promise.allSettled||(T.Promise.allSettled=w),T.Promise.any||(T.Promise.any=m));var O="1.1.9",j=function(){return o((function e(t){r(this,e),s(this,"batched",[]),s(this,"timeout",0),this.options=t}),[{key:"add",value:function(e){this.batched.push(e),this.check()}},{key:"flush",value:(e=i(c().mark((function e(){var t,i,r,n,o,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.timeout&&clearTimeout(this.timeout),this.timeout=0,this.batched.length&&(t=this.batched,this.batched=[],t.length)){for(r=a.length,n=new Array(r),o=0;o<r;o++)n[o]=a[o];(i=this.options).run.apply(i,[t].concat(n))}case 3:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"check",value:function(){var e=this;this.batched.length>=this.options.batchSize?this.flush():0===this.timeout&&(this.timeout=window.setTimeout((function(){return e.flush()}),this.options.batchTime))}}]);var e}(),M=function(){return o((function e(){r(this,e),s(this,"current",0),s(this,"currentTime",Date.now())}),[{key:"get",value:function(){return this.current+=1,this.currentTime=Date.now(),{sn:this.current,time:this.currentTime}}}])}(),q=function(e){var t=function(t){var i,r=null==t||null===(i=t.match)||void 0===i?void 0:i.call(t,new RegExp("(^|&)"+e+"=([^&]*)(&|$)"));return null!=r&&r[2]?decodeURIComponent(r[2]):null},i=window.location.search.slice(1),r=window.location.hash.split("?")[1]||"";if(i){var n=t(i);if(n)return n}if(r){var o=t(r);if(o)return o}return null},A=function(e,t){var i=e.indexOf("?"),r=[];for(var n in t)r.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n])));var o="".concat(i>0?"&":"?").concat(r.join("&")),a=e.indexOf("#");return a>0?e.slice(0,a)+o+e.slice(a):e+o},I=function(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),i=document.cookie.match(t);return null!=i&&i[2]?decodeURIComponent(i[2]):null},N=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"same-domain",n=new Date;n.setTime(n.getTime()+1e3*i);var o=i>0?";expires="+n.toUTCString():"";return"same-domain"===r&&(r="."+document.domain.split(".").slice(-2).join(".")),document.cookie=e+"="+encodeURIComponent(t)+o+(r?";domain=".concat(r,";path=/"):""),t},B=function(e){for(var t=document.getElementsByTagName("meta"),i=0;i<t.length;i++)if(t[i].getAttribute("name")===e)return t[i].getAttribute("content");return null},C=function(e){for(var t="",i=0;i<e;i++)t+=Math.floor(16*Math.random()).toString(16).toUpperCase();return t},R=function(e){return"object"===p(e)&&!Array.isArray(e)},L=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];if(!i.length)return e;var n=i.shift();if(R(n))for(var o in n)R(n[o])?(e[o]||(e[o]={}),L(e[o],n[o])):e[o]=n[o];return L.apply(void 0,[e].concat(i))},D=function(e,t){return"boolean"==typeof t?{enabled:t,value:e.value}:"object"===p(t)&&t?{enabled:!0,value:L({},e.value,t)}:e},z=function(e,t){var i={},r={},n=function(n){t.some((function(e){return e===n}))&&void 0!==e[n]&&null!==e[n]?i[n]=e[n]:r[n]=e[n]};for(var o in e)n(o);return{selected:i,remain:r}},U=function(e){var t={};for(var i in e){var r,n;if(void 0!==e[i]&&null!==e[i])if("object"===p(e[i]))try{t[i]=JSON.stringify(e[i])}catch(r){var o,a;t[i]=(null===(o=(a=e[i]).toString)||void 0===o?void 0:o.call(a))||""}else t[i]=(null===(r=(n=e[i]).toString)||void 0===r?void 0:r.call(n))||""}return t},G=function(e){return e.replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())}))},H=function(e){var t={};for(var i in e)t[G(i)]=e[i];return t},Q=function(e){var t,i;return null!==(t=null===(i=window.__ReporterPbGlobalState)||void 0===i?void 0:i[e])&&void 0!==t?t:null},W=function(e,t){window.__ReporterPbGlobalState||(window.__ReporterPbGlobalState={}),window.__ReporterPbGlobalState[e]=t},Z=function(){var e=I("b_lsid")||"";if(function(e){var t,i=parseInt((null===(t=e.split("_"))||void 0===t?void 0:t[1])||"",16)||0;if(i+54e5<Date.now())return!1;var r=new Date(i);r.setHours(0,0,0,0);var n=new Date;return n.setHours(0,0,0,0),r.getTime()===n.getTime()&&void 0}(e)){var t=Date.now().toString(16).toUpperCase(),i="".concat(C(8),"_").concat(t);return N("b_lsid",i,0,"same-domain"),i}return e},X=function(){var e,t,i=((t=q("bsource"))?(N("bsource_origin",t),{bsource:t,bsourceFrom:"url"}):null)||function(){var e=q("share_source");if(!e)return null;N("share_source_origin",e);var t={WEIXIN:"share_source_weixinchat",WEIXIN_MONMENT:"share_source_weixin_moments",WEIXIN_MONMENTS:"share_source_weixin_moments",QQ:"share_source_qqchat",QZONE:"share_source_qzone",QQZONE:"share_source_qzone",SINA:"share_source_weibo",WEIBO:"share_source_weibo",COPY:"share_source_copy_link",COPY_LINK:"share_source_copy_link",GENERIC:"share_source_more",MORE:"share_source_more",WEIBO_WEB:"share_source_weibo_web",QQ_WEB:"share_source_qqchat_web",QZONE_WEB:"share_source_qzone_web",TIEBA_WEB:"share_source_tieba_web",COPY_WEB:"share_source_copylink_web",WEIXIN_WEB:"share_source_weixinchat_web",ONPHONE_WEB:"share_source_onphone_web"}[e.toUpperCase()]||"";return t?{bsource:t,bsourceFrom:"share"}:null}()||function(){var e=document.referrer,t={search_360:/(.)*((baike.so.com)|(m.image.so.com)|(m.so.com)|(m.video.so.com)|(www.so.com))/,search_baidu:/(.)*\.baidu.com/,search_google:/(.)*\.google.com/,search_sm:/(.)*\.sm.cn/,search_sougo:/(.)*((m.soso.com)|(www.soso.com)|(\.sogou.com))/,search_bing:/(.)*\.bing.com/,search_yahoo:/(.)*\.yahoo.com/};for(var i in t)if(t[i].test(e))return{bsource:i,bsourceFrom:"refer"};return null}()||((e=I("bsource"))?{bsource:e,bsourceFrom:"cookie"}:null)||function(){var e={baiduspider:/Baiduspider/,qqlive:/QQLive/i,qq:/QQ\/([\d\.]+)/i,qqbrowser_app:/MQQBrowser/i,weibo:/Weibo/i,wechat:/MicroMessenger/i,bdbox:/baiduboxapp/i,iqiyi_video_app:/iqiyi/i,uc_browser_app:/UCBrowser/i,xiaomiqjs:/MiuiQuickSearchBox/,zhihu:/ZhihuHybrid/i},t=navigator.userAgent;for(var i in e)if(e[i].test(t))return{bsource:i,bsourceFrom:"ua"};return null}()||{bsource:"",bsourceFrom:""};return i.bsource&&N("bsource",i.bsource),i},$=function(){var e=parseInt(B("spm_ptype")||"")||0;if(e)return e;var t=navigator.userAgent.toLowerCase(),i=!!t.match(/ipad/i),r=!!t.match(/iphone os/i),n=!!t.match(/midp/i),o=!!t.match(/rv:1.2.3.4/i),a=!!t.match(/ucweb/i),s=!!t.match(/android/i),u=!!t.match(/windows ce/i),l=!!t.match(/windows mobile/i);return i||r||n||o||a||s||u||l?2:1},Y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},J={exports:{}};!function(e,t){!function(i,r){var n="function",o="undefined",a="object",s="string",u="major",l="model",c="name",d="type",f="vendor",v="version",h="architecture",w="console",b="mobile",m="tablet",g="smarttv",y="wearable",_="embedded",k="Amazon",x="Apple",F="ASUS",S="BlackBerry",E="Browser",V="Chrome",P="Firefox",T="Google",O="Huawei",j="LG",M="Microsoft",q="Motorola",A="Opera",I="Samsung",N="Sharp",B="Sony",C="Xiaomi",R="Zebra",L="Facebook",D="Chromium OS",z="Mac OS",U=" Browser",G=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t},H=function(e,t){return p(e)===s&&-1!==Q(t).indexOf(Q(e))},Q=function(e){return e.toLowerCase()},W=function(e,t){if(p(e)===s)return e=e.replace(/^\s\s*/,""),p(t)===o?e:e.substring(0,500)},Z=function(e,t){for(var i,o,s,u,l,c,d=0;d<t.length&&!l;){var f=t[d],v=t[d+1];for(i=o=0;i<f.length&&!l&&f[i];)if(l=f[i++].exec(e))for(s=0;s<v.length;s++)c=l[++o],p(u=v[s])===a&&u.length>0?2===u.length?p(u[1])==n?this[u[0]]=u[1].call(this,c):this[u[0]]=u[1]:3===u.length?p(u[1])!==n||u[1].exec&&u[1].test?this[u[0]]=c?c.replace(u[1],u[2]):r:this[u[0]]=c?u[1].call(this,c,u[2]):r:4===u.length&&(this[u[0]]=c?u[3].call(this,c.replace(u[1],u[2])):r):this[u]=c||r;d+=2}},X=function(e,t){for(var i in t)if(p(t[i])===a&&t[i].length>0){for(var n=0;n<t[i].length;n++)if(H(t[i][n],e))return"?"===i?r:i}else if(H(t[i],e))return"?"===i?r:i;return t.hasOwnProperty("*")?t["*"]:e},$={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,v],[/opios[\/ ]+([\w\.]+)/i],[v,[c,A+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[v,[c,A+" GX"]],[/\bopr\/([\w\.]+)/i],[v,[c,A]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[c,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[v,[c,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,v],[/quark(?:pc)?\/([-\w\.]+)/i],[v,[c,"Quark"]],[/\bddg\/([\w\.]+)/i],[v,[c,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[c,"UC"+E]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[c,"Smart Lenovo "+E]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+E],v],[/\bfocus\/([\w\.]+)/i],[v,[c,P+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[c,A+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[c,A+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[c,"MIUI"+U]],[/fxios\/([\w\.-]+)/i],[v,[c,P]],[/\bqihoobrowser\/?([\w\.]*)/i],[v,[c,"360"]],[/\b(qq)\/([\w\.]+)/i],[[c,/(.+)/,"$1Browser"],v],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1"+U],v],[/samsungbrowser\/([\w\.]+)/i],[v,[c,I+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[v,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[c,v],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[c],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[v,c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,L],v],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[c,V+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,V+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[c,"Android "+E]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[v,X,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],v],[/(wolvic|librewolf)\/([\w\.]+)/i],[c,v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[c,P+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,[v,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[c,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,Q]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,"",Q]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,Q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[f,I],[d,m]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[l,[f,I],[d,b]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[f,x],[d,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[f,x],[d,m]],[/(macintosh);/i],[l,[f,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[f,N],[d,b]],[/(?:honor)([-\w ]+)[;\)]/i],[l,[f,"Honor"],[d,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[f,O],[d,m]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[f,O],[d,b]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[l,/_/g," "],[f,C],[d,b]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[f,C],[d,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[f,"OPPO"],[d,b]],[/\b(opd2\d{3}a?) bui/i],[l,[f,"OPPO"],[d,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[f,"Vivo"],[d,b]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[l,[f,"Realme"],[d,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[f,q],[d,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[f,q],[d,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[f,j],[d,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[f,j],[d,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[f,"Lenovo"],[d,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[f,"Nokia"],[d,b]],[/(pixel c)\b/i],[l,[f,T],[d,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[f,T],[d,b]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[f,B],[d,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[f,B],[d,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[f,"OnePlus"],[d,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[f,k],[d,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[f,k],[d,b]],[/(playbook);[-\w\),; ]+(rim)/i],[l,f,[d,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[f,S],[d,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[f,F],[d,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[f,F],[d,b]],[/(nexus 9)/i],[l,[f,"HTC"],[d,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[l,/_/g," "],[d,b]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[l,[f,"TCL"],[d,m]],[/(itel) ((\w+))/i],[[f,Q],l,[d,X,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[f,"Acer"],[d,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[f,"Meizu"],[d,b]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[l,[f,"Ulefone"],[d,b]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[l,[f,"Energizer"],[d,b]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[l,[f,"Cat"],[d,b]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[l,[f,"Smartfren"],[d,b]],[/droid.+; (a(?:015|06[35]|142p?))/i],[l,[f,"Nothing"],[d,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,l,[d,b]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,l,[d,m]],[/(surface duo)/i],[l,[f,M],[d,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[f,"Fairphone"],[d,b]],[/(u304aa)/i],[l,[f,"AT&T"],[d,b]],[/\bsie-(\w*)/i],[l,[f,"Siemens"],[d,b]],[/\b(rct\w+) b/i],[l,[f,"RCA"],[d,m]],[/\b(venue[\d ]{2,7}) b/i],[l,[f,"Dell"],[d,m]],[/\b(q(?:mv|ta)\w+) b/i],[l,[f,"Verizon"],[d,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[f,"Barnes & Noble"],[d,m]],[/\b(tm\d{3}\w+) b/i],[l,[f,"NuVision"],[d,m]],[/\b(k88) b/i],[l,[f,"ZTE"],[d,m]],[/\b(nx\d{3}j) b/i],[l,[f,"ZTE"],[d,b]],[/\b(gen\d{3}) b.+49h/i],[l,[f,"Swiss"],[d,b]],[/\b(zur\d{3}) b/i],[l,[f,"Swiss"],[d,m]],[/\b((zeki)?tb.*\b) b/i],[l,[f,"Zeki"],[d,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],l,[d,m]],[/\b(ns-?\w{0,9}) b/i],[l,[f,"Insignia"],[d,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[f,"NextBook"],[d,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],l,[d,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],l,[d,b]],[/\b(ph-1) /i],[l,[f,"Essential"],[d,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[f,"Envizen"],[d,m]],[/\b(trio[-\w\. ]+) b/i],[l,[f,"MachSpeed"],[d,m]],[/\btu_(1491) b/i],[l,[f,"Rotor"],[d,m]],[/(shield[\w ]+) b/i],[l,[f,"Nvidia"],[d,m]],[/(sprint) (\w+)/i],[f,l,[d,b]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[f,M],[d,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[f,R],[d,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[f,R],[d,b]],[/smart-tv.+(samsung)/i],[f,[d,g]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[f,I],[d,g]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,j],[d,g]],[/(apple) ?tv/i],[f,[l,x+" TV"],[d,g]],[/crkey/i],[[l,V+"cast"],[f,T],[d,g]],[/droid.+aft(\w+)( bui|\))/i],[l,[f,k],[d,g]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[f,N],[d,g]],[/(bravia[\w ]+)( bui|\))/i],[l,[f,B],[d,g]],[/(mitv-\w{5}) bui/i],[l,[f,C],[d,g]],[/Hbbtv.*(technisat) (.*);/i],[f,l,[d,g]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,W],[l,W],[d,g]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,l,[d,w]],[/droid.+; (shield) bui/i],[l,[f,"Nvidia"],[d,w]],[/(playstation [345portablevi]+)/i],[l,[f,B],[d,w]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[f,M],[d,w]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[l,[f,I],[d,y]],[/((pebble))app/i],[f,l,[d,y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[f,x],[d,y]],[/droid.+; (glass) \d/i],[l,[f,T],[d,y]],[/droid.+; (wt63?0{2,3})\)/i],[l,[f,R],[d,y]],[/droid.+; (glass) \d/i],[l,[f,T],[d,y]],[/(pico) (4|neo3(?: link|pro)?)/i],[f,l,[d,y]],[/; (quest( \d| pro)?)/i],[l,[f,L],[d,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[d,_]],[/(aeobc)\b/i],[l,[f,k],[d,_]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[l,[d,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[d,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,b]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[c,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[c,v],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,v],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[v,X,$]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,X,$],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,z],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,v],[/\(bb(10);/i],[v,[c,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[c,P+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[v,[c,V+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,D],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,v],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,v]]},J=function(e,t){if(p(e)===a&&(t=e,e=r),!(this instanceof J))return new J(e,t).getResult();var w=p(i)!==o&&i.navigator?i.navigator:r,g=e||(w&&w.userAgent?w.userAgent:""),y=w&&w.userAgentData?w.userAgentData:r,_=t?function(e,t){var i={};for(var r in e)t[r]&&t[r].length%2==0?i[r]=t[r].concat(e[r]):i[r]=e[r];return i}(Y,t):Y,k=w&&w.userAgent==g;return this.getBrowser=function(){var e,t={};return t[c]=r,t[v]=r,Z.call(t,g,_.browser),t[u]=p(e=t[v])===s?e.replace(/[^\d\.]/g,"").split(".")[0]:r,k&&w&&w.brave&&p(w.brave.isBrave)==n&&(t[c]="Brave"),t},this.getCPU=function(){var e={};return e[h]=r,Z.call(e,g,_.cpu),e},this.getDevice=function(){var e={};return e[f]=r,e[l]=r,e[d]=r,Z.call(e,g,_.device),k&&!e[d]&&y&&y.mobile&&(e[d]=b),k&&"Macintosh"==e[l]&&w&&p(w.standalone)!==o&&w.maxTouchPoints&&w.maxTouchPoints>2&&(e[l]="iPad",e[d]=m),e},this.getEngine=function(){var e={};return e[c]=r,e[v]=r,Z.call(e,g,_.engine),e},this.getOS=function(){var e={};return e[c]=r,e[v]=r,Z.call(e,g,_.os),k&&!e[c]&&y&&y.platform&&"Unknown"!=y.platform&&(e[c]=y.platform.replace(/chrome os/i,D).replace(/macos/i,z)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return g},this.setUA=function(e){return g=p(e)===s&&e.length>500?W(e,500):e,this},this.setUA(g),this};J.VERSION="1.0.40",J.BROWSER=G([c,v,u]),J.CPU=G([h]),J.DEVICE=G([l,f,d,w,b,g,m,y,_]),J.ENGINE=J.OS=G([c,v]),e.exports&&(t=e.exports=J),t.UAParser=J;var K=p(i)!==o&&(i.jQuery||i.Zepto);if(K&&!K.ua){var ee=new J;K.ua=ee.getResult(),K.ua.get=function(){return ee.getUA()},K.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var i in t)K.ua[i]=t[i]}}}("object"===("undefined"==typeof window?"undefined":p(window))?window:Y)}(J,J.exports);var K=J.exports,ee=null,te=function(){return ee||(ee=new K.UAParser)},ie=function(){var e,t=te().getDevice().type;if(!t)return"pc";return null!==(e={mobile:"phone",tablet:"pad",smarttv:"tv",embedded:"embedded",wearable:"ware",console:"console"}[t])&&void 0!==e?e:"pc"},re=function(){var e,t,i=te(),r=i.getDevice(),n=i.getOS(),o=n.name?"".concat(n.name).concat(n.version?" "+n.version:""):"",a=navigator.userAgent;!o&&/OpenHarmony/.test(a)&&(o=null!==(e=null===(t=a.match(/(OpenHarmony ?[\d.]*)/))||void 0===t?void 0:t[1])&&void 0!==e?e:"");return{brand:r.vendor||"",model:r.model||"",system:o}},ne=function(e){var t,i;return{app_id:null!==(t=null==e?void 0:e.appId)&&void 0!==t?t:100,platform:(null!==(i=null==e?void 0:e.platform)&&void 0!==i?i:/AppleWebKit.*Mobile.*/i.test(navigator.userAgent))?6:5,cbuvid:I("buvid3")||"",cmid:parseInt(I("DedeUserID")||"0"),fts:I("b_nut")||"",screen_resolution:"".concat(window.screen.width,"*").concat(window.screen.height),timezone:(new Date).getTimezoneOffset().toString(),bilifp:I("buvid_fp")||"",device_type:ie()}},oe=function(e){var t,i,r,n;return{network_info:null!==(t=null!==(i=null==e?void 0:e.networkInfo)&&void 0!==i?i:null===(r=navigator.connection)||void 0===r?void 0:r.effectiveType)&&void 0!==t?t:"4g",url:window.location.href,refer_url:document.referrer,logver:O,abtest:JSON.stringify(null!==(n=window.abtest)&&void 0!==n?n:{}),ptype:$(),window_size:"".concat(window.innerWidth,"*").concat(window.innerHeight),bsource:X().bsource,bsource_origin:q("bsource")||"",share_source_origin:q("share_source")||"",share_session_id:q("unique_k")||"",session_id:Z()}},ae=function(){var e,t,i,r,n,o=null===(e=window.performance)||void 0===e||null===(t=e.getEntriesByType)||void 0===t||null===(t=t.call(e,"navigation"))||void 0===t?void 0:t[0];if(o){var a;return null!==(a={navigate:0,reload:1,back_forward:2,prerender:3}[o.type])&&void 0!==a?a:0}return null!==(i=window.performance)&&void 0!==i&&i.navigation&&null!==(r=null===(n=window.performance)||void 0===n||null===(n=n.navigation)||void 0===n?void 0:n.type)&&void 0!==r?r:0},se={enabled:!0,value:{batchSize:32,batchTime:1e3}},ue={enabled:!0,value:{maxCount:5,retryInterval:3e3,maxInterval:6e4}},le={enabled:!0,value:{maxCount:3,retryInterval:1e4,maxInterval:12e4}},ce="undefined"!=typeof window,de=I("buvid3")||"",fe=de?function(e){for(var t=5381,i=0;i<e.length;i++)t=(t<<5)+t+e.charCodeAt(i);return t>>>0}(de+"retry")%100:0,pe=de&&fe<0,ve=pe?Math.floor(fe/4)+1:0,he=pe&&fe<4,we=pe&&fe>=4&&fe<8;var be,me=function(e){var t=e.url,i=e.method,r=e.body,n=e.headers,o=e.credentials,a=new XMLHttpRequest;return new Promise((function(e,s){if(a.open(i.toUpperCase(),t),o&&"omit"===o||(a.withCredentials=!0),a.responseType="text",n)for(var u in n)a.setRequestHeader(u,n[u]);a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE){var t=a.status;if(t>=200&&t<300){var i=null==a?void 0:a.responseText;e(i||"")}else s({code:t})}},a.onerror=function(e){return s(e)},a.ontimeout=function(){return s("timeout")},a.send(r)}))},ge=function(){var e=i(c().mark((function e(t){var i,r,n,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.url,r=t.method,n=t.body,o=t.headers,a=t.credentials,s=t.keepalive,e.next=3,fetch(i,{method:r,headers:o,body:n,credentials:null!=a?a:"include",priority:"high",keepalive:null==s||s});case 3:if(!((u=e.sent).status<200&&u.status>=300)){e.next=6;break}throw new Error("".concat(u.status," ").concat(u.statusText));case 6:return e.abrupt("return",u.text());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=i(c().mark((function e(t){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="function"==typeof window.fetch?ge:me,e.abrupt("return",i(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=1/0;ce&&((_e=null!==(be=Q("maxErrorCount"))&&void 0!==be?be:0)||(_e=30+Math.floor(10*Math.random()),W("maxErrorCount",_e)));var ke=ce&&"function"==typeof window.fetch,xe=ce&&ke&&window.Request&&"keepalive"in Request.prototype,Fe=ce&&"function"==typeof navigator.sendBeacon,Se=function(){var e=i(c().mark((function e(t,i){var r,n,o,a,s,u,d,f,p,v,h,w,b,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null!==(r=Q("errReqCount"))&&void 0!==r?r:0)>=_e)){e.next=3;break}return e.abrupt("return");case 3:return o=null!==(n=null==i?void 0:i.url)&&void 0!==n?n:"//data.bilibili.com/v2/log/web",o=A(o,{content_type:"pbrequest",logid:i.logId,disable_compression:"true"}),a={url:o,method:"post",body:t,headers:{"Content-Type":"text/plain"}},s=t.length>=65536,u=s?function(){return ke?ge(l(l({},a),{},{keepalive:!1})):me(a)}:xe?function(){return ge(a)}:Fe?function(){if(!navigator.sendBeacon(o,new Blob([t],{type:"text/plain"})))return ke?ge(l(l({},a),{},{keepalive:!1})):me(a)}:function(){return me(a)},e.prev=8,e.next=11,u();case 11:return e.abrupt("return",e.sent);case 14:if(e.prev=14,e.t0=e.catch(8),Ee(),!(d=D(he?le:we?{enabled:!1,value:ue.value}:ue,null==i?void 0:i.retry)).enabled){e.next=32;break}f=d.value,p=f.retryInterval,v=f.maxInterval,h=f.maxCount,w=1,b=c().mark((function e(){var t,i,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Math.random()*p,r=Math.min(1e3*Math.pow(p/1e3,w),v)+i,e.next=4,new Promise((function(e){return setTimeout(e,r)}));case 4:if(!((null!==(t=Q("errReqCount"))&&void 0!==t?t:0)>=_e)){e.next=7;break}return e.abrupt("return",{v:void 0});case 7:return e.prev=7,e.next=10,u();case 10:return e.t0=e.sent,e.abrupt("return",{v:e.t0});case 14:e.prev=14,e.t1=e.catch(7),Ee(),w+=1;case 18:case"end":return e.stop()}}),e,null,[[7,14]])}));case 22:if(!(w<=h)){e.next=29;break}return e.delegateYield(b(),"t1",24);case 24:if(!(m=e.t1)){e.next=27;break}return e.abrupt("return",m.v);case 27:e.next=22;break;case 29:console.error("[reporter-pb]: max retries exceeded",e.t0,a.body),e.next=33;break;case 32:console.error("[reporter-pb]: request error",e.t0,a.body);case 33:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t,i){return e.apply(this,arguments)}}();function Ee(){var e,t=(null!==(e=Q("errReqCount"))&&void 0!==e?e:0)+1;if(W("errReqCount",t),t===_e){var i=/^uat-/.test(location.hostname)?location.hostname.slice(0,4):"";ye({url:"https://".concat(i,"api.bilibili.com/x/web-frontend/data/report"),method:"post",body:JSON.stringify({level:"ERROR",event:"reporter-request-blocked",extra:{spm_prefix:B("spm_prefix"),url:window.location.href,buvid3:I("buvid3"),mid:I("DedeUserID"),ua:navigator.userAgent}}),headers:{"Content-Type":"application/json"}}).catch((function(e){}))}}var Ve=function(e){return/^\w{8,}-\w{4,}-\w{4,}-\w{4,}/.test(e)},Pe=function(e){return/^\w{8,}-\w{4,}-\w{4,}-\w{4,}-\w{17,}infoc$/.test(e)},Te=function(){var e=I("buvid3")||"",t=I("buvid4")||"";return Pe(e)&&Ve(t)},Oe=function(){var e=i(c().mark((function e(){var t,i,r,n,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ce){e.next=2;break}return e.abrupt("return");case 2:if(!Te()){e.next=4;break}return e.abrupt("return");case 4:return r=null,e.prev=5,e.t0=JSON,e.next=9,ye({url:"https://api.bilibili.com/x/frontend/finger/spi",method:"get"});case 9:e.t1=e.sent,r=e.t0.parse.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),console.error("[reporter-pb]: init buvid error ",e.t2);case 16:if(!Te()){e.next=18;break}return e.abrupt("return");case 18:n=Ve((null===(t=r)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.b_3)||"")?r.data.b_3:(a=void 0,s=void 0,a=C,s=("00000"+(Date.now()%1e5).toString()).slice(-5),"".concat(a(8),"-").concat(a(4),"-").concat(a(4),"-").concat(a(4),"-").concat(a(12)).concat(s,"infoc")),Pe(I("buvid3")||"")||(N("buvid3",n,94608e3,"same-domain"),N("b_nut",Math.floor(Date.now()/1e3).toString(),94608e3,"same-domain")),o=(null===(i=r)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.b_4)||"",!Ve(I("buvid4")||"")&&Ve(o)&&N("buvid4",o,94608e3,"same-domain");case 22:case"end":return e.stop()}var a,s}),e,null,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),je=4294967296,Me=1/je,qe="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8"),Ae=function(){return o((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array(16);r(this,e),this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}),[{key:"readFields",value:function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,e(n,t,this),this.pos===o&&this.skip(r)}return t}},{key:"readMessage",value:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}},{key:"readFixed32",value:function(){var e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}},{key:"readSFixed32",value:function(){var e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}},{key:"readFixed64",value:function(){var e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*je;return this.pos+=8,e}},{key:"readSFixed64",value:function(){var e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*je;return this.pos+=8,e}},{key:"readFloat",value:function(){var e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}},{key:"readDouble",value:function(){var e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}},{key:"readVarint",value:function(e){var t,i,r=this.buf;return t=127&(i=r[this.pos++]),i<128?t:(t|=(127&(i=r[this.pos++]))<<7,i<128?t:(t|=(127&(i=r[this.pos++]))<<14,i<128?t:(t|=(127&(i=r[this.pos++]))<<21,i<128?t:function(e,t,i){var r,n,o=i.buf;if(n=o[i.pos++],r=(112&n)>>4,n<128)return Ie(e,r,t);if(n=o[i.pos++],r|=(127&n)<<3,n<128)return Ie(e,r,t);if(n=o[i.pos++],r|=(127&n)<<10,n<128)return Ie(e,r,t);if(n=o[i.pos++],r|=(127&n)<<17,n<128)return Ie(e,r,t);if(n=o[i.pos++],r|=(127&n)<<24,n<128)return Ie(e,r,t);if(n=o[i.pos++],r|=(1&n)<<31,n<128)return Ie(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=r[this.pos]))<<28,e,this))))}},{key:"readVarint64",value:function(){return this.readVarint(!0)}},{key:"readSVarint",value:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2}},{key:"readBoolean",value:function(){return Boolean(this.readVarint())}},{key:"readString",value:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&qe?qe.decode(this.buf.subarray(t,e)):function(e,t,i){var r="",n=t;for(;n<i;){var o=e[n],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n+s>i)break;var u=void 0,l=void 0,c=void 0;1===s?o<128&&(a=o):2===s?128==(192&(u=e[n+1]))&&(a=(31&o)<<6|63&u)<=127&&(a=null):3===s?(u=e[n+1],l=e[n+2],128==(192&u)&&128==(192&l)&&((a=(15&o)<<12|(63&u)<<6|63&l)<=2047||a>=55296&&a<=57343)&&(a=null)):4===s&&(u=e[n+1],l=e[n+2],c=e[n+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&((a=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)<=65535||a>=1114112)&&(a=null)),null===a?(a=65533,s=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|1023&a),r+=String.fromCharCode(a),n+=s}return r}(this.buf,t,e)}},{key:"readBytes",value:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}},{key:"readPackedVarint",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=this.readPackedEnd();this.pos<i;)e.push(this.readVarint(t));return e}},{key:"readPackedSVarint",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readSVarint());return e}},{key:"readPackedBoolean",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readBoolean());return e}},{key:"readPackedFloat",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readFloat());return e}},{key:"readPackedDouble",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readDouble());return e}},{key:"readPackedFixed32",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readFixed32());return e}},{key:"readPackedSFixed32",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readSFixed32());return e}},{key:"readPackedFixed64",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readFixed64());return e}},{key:"readPackedSFixed64",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readSFixed64());return e}},{key:"readPackedEnd",value:function(){return 2===this.type?this.readVarint()+this.pos:this.pos+1}},{key:"skip",value:function(e){var t=7&e;if(0===t)for(;this.buf[this.pos++]>127;);else if(2===t)this.pos=this.readVarint()+this.pos;else if(5===t)this.pos+=4;else{if(1!==t)throw new Error("Unimplemented type: ".concat(t));this.pos+=8}}},{key:"writeTag",value:function(e,t){this.writeVarint(e<<3|t)}},{key:"realloc",value:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.dataView=new DataView(i.buffer),this.length=t}}},{key:"finish",value:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}},{key:"writeFixed32",value:function(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}},{key:"writeSFixed32",value:function(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}},{key:"writeFixed64",value:function(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Me),!0),this.pos+=8}},{key:"writeSFixed64",value:function(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Me),!0),this.pos+=8}},{key:"writeVarint",value:function(e){(e=+e||0)>268435455||e<0?function(e,t){var i,r;e>=0?(i=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(i=~(-e%4294967296))?i=i+1|0:(i=0,r=r+1|0));if(e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,i){i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos]=127&e}(i,0,t),function(e,t){var i=(7&e)<<4;if(t.buf[t.pos++]|=i|((e>>>=3)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;t.buf[t.pos++]=127&e}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))}},{key:"writeSVarint",value:function(e){this.writeVarint(e<0?2*-e-1:2*e)}},{key:"writeBoolean",value:function(e){this.writeVarint(+e)}},{key:"writeString",value:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,i){for(var r,n,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!n){r>56319||o+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):n=r;continue}if(r<56320){e[i++]=239,e[i++]=191,e[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(e[i++]=239,e[i++]=191,e[i++]=189,n=null);r<128?e[i++]=r:(r<2048?e[i++]=r>>6|192:(r<65536?e[i++]=r>>12|224:(e[i++]=r>>18|240,e[i++]=r>>12&63|128),e[i++]=r>>6&63|128),e[i++]=63&r|128)}return i}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&Ne(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i}},{key:"writeFloat",value:function(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}},{key:"writeDouble",value:function(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}},{key:"writeBytes",value:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]}},{key:"writeRawMessage",value:function(e,t){this.pos++;var i=this.pos;e(t,this);var r=this.pos-i;r>=128&&Ne(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r}},{key:"writeMessage",value:function(e,t,i){this.writeTag(e,2),this.writeRawMessage(t,i)}},{key:"writePackedVarint",value:function(e,t){t.length&&this.writeMessage(e,Be,t)}},{key:"writePackedSVarint",value:function(e,t){t.length&&this.writeMessage(e,Ce,t)}},{key:"writePackedBoolean",value:function(e,t){t.length&&this.writeMessage(e,De,t)}},{key:"writePackedFloat",value:function(e,t){t.length&&this.writeMessage(e,Re,t)}},{key:"writePackedDouble",value:function(e,t){t.length&&this.writeMessage(e,Le,t)}},{key:"writePackedFixed32",value:function(e,t){t.length&&this.writeMessage(e,ze,t)}},{key:"writePackedSFixed32",value:function(e,t){t.length&&this.writeMessage(e,Ue,t)}},{key:"writePackedFixed64",value:function(e,t){t.length&&this.writeMessage(e,Ge,t)}},{key:"writePackedSFixed64",value:function(e,t){t.length&&this.writeMessage(e,He,t)}},{key:"writeBytesField",value:function(e,t){this.writeTag(e,2),this.writeBytes(t)}},{key:"writeFixed32Field",value:function(e,t){this.writeTag(e,5),this.writeFixed32(t)}},{key:"writeSFixed32Field",value:function(e,t){this.writeTag(e,5),this.writeSFixed32(t)}},{key:"writeFixed64Field",value:function(e,t){this.writeTag(e,1),this.writeFixed64(t)}},{key:"writeSFixed64Field",value:function(e,t){this.writeTag(e,1),this.writeSFixed64(t)}},{key:"writeVarintField",value:function(e,t){this.writeTag(e,0),this.writeVarint(t)}},{key:"writeSVarintField",value:function(e,t){this.writeTag(e,0),this.writeSVarint(t)}},{key:"writeStringField",value:function(e,t){this.writeTag(e,2),this.writeString(t)}},{key:"writeFloatField",value:function(e,t){this.writeTag(e,5),this.writeFloat(t)}},{key:"writeDoubleField",value:function(e,t){this.writeTag(e,1),this.writeDouble(t)}},{key:"writeBooleanField",value:function(e,t){this.writeVarintField(e,+t)}}])}();function Ie(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Ne(e,t,i){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=e;n--)i.buf[n+r]=i.buf[n]}function Be(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function Ce(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function Re(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function Le(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function De(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function ze(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function Ue(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function Ge(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function He(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}var Qe=function(){var e=window._GreyResult||window._BiliGreyResult,t={};e&&Object.keys(e).forEach((function(i){"grayVersion"===i?t._BiliGreyResult_versionId=e[i]:t["_BiliGreyResult_".concat(i)]=e[i]}));return t};function We(e,t){if(e.log_id&&t.writeStringField(1,e.log_id),e.event_id&&t.writeStringField(2,e.event_id),null!=e.body&&t.writeBytesField(3,e.body),e.meta)for(var i=0,r=Object.keys(e.meta);i<r.length;i++){var n=r[i];t.writeMessage(4,Ze,{key:n,value:e.meta[n]})}}function Ze(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function Xe(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function $e(e,t){e.app_id&&t.writeVarintField(1,e.app_id),e.platform&&t.writeVarintField(2,e.platform),e.cbuvid&&t.writeStringField(3,e.cbuvid),e.cmid&&t.writeVarintField(4,e.cmid),e.fts&&t.writeStringField(5,e.fts),e.screen_resolution&&t.writeStringField(6,e.screen_resolution),e.timezone&&t.writeStringField(7,e.timezone),e.bilifp&&t.writeStringField(8,e.bilifp),e.device_type&&t.writeStringField(9,e.device_type)}function Ye(e,t){e.network_info&&t.writeStringField(1,e.network_info),e.url&&t.writeStringField(2,e.url),e.refer_url&&t.writeStringField(3,e.refer_url),e.logver&&t.writeStringField(4,e.logver),e.abtest&&t.writeStringField(5,e.abtest),e.ptype&&t.writeVarintField(6,e.ptype),e.window_size&&t.writeStringField(7,e.window_size),e.bsource&&t.writeStringField(8,e.bsource),e.bsource_origin&&t.writeStringField(9,e.bsource_origin),e.share_source_origin&&t.writeStringField(10,e.share_source_origin),e.share_session_id&&t.writeStringField(11,e.share_session_id),e.session_id&&t.writeStringField(12,e.session_id)}function Je(e,t){if(e.target_url&&t.writeStringField(1,e.target_url),e.button_type&&t.writeVarintField(2,e.button_type),e.target_event_id&&t.writeStringField(3,e.target_event_id),e.extra)for(var i=0,r=Object.keys(e.extra);i<r.length;i++){var n=r[i];t.writeMessage(4,Ke,{key:n,value:e.extra[n]})}}function Ke(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function et(e,t){if(e.event_id_from&&t.writeStringField(1,e.event_id_from),e.load_type&&t.writeVarintField(2,e.load_type),e.pv_start&&t.writeVarintField(3,e.pv_start),e.extra)for(var i=0,r=Object.keys(e.extra);i<r.length;i++){var n=r[i];t.writeMessage(4,tt,{key:n,value:e.extra[n]})}}function tt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function it(e,t){if(e.event_id_from&&t.writeStringField(1,e.event_id_from),e.load_type&&t.writeVarintField(2,e.load_type),e.pv_start&&t.writeVarintField(3,e.pv_start),e.duration&&t.writeVarintField(4,e.duration),e.pv_end&&t.writeVarintField(5,e.pv_end),e.extra)for(var i=0,r=Object.keys(e.extra);i<r.length;i++){var n=r[i];t.writeMessage(6,rt,{key:n,value:e.extra[n]})}}function rt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function nt(e,t){if(e.extra)for(var i=0,r=Object.keys(e.extra);i<r.length;i++){var n=r[i];t.writeMessage(1,ot,{key:n,value:e.extra[n]})}}function ot(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function at(e,t){if(e.spm_id&&t.writeStringField(1,e.spm_id),e.play_from_spmid&&t.writeStringField(2,e.play_from_spmid),e.avid&&t.writeVarintField(3,e.avid),e.cid&&t.writeVarintField(4,e.cid),e.pname&&t.writeVarintField(5,e.pname),e.room_id&&t.writeVarintField(6,e.room_id),e.season_id&&t.writeVarintField(7,e.season_id),e.ep_id&&t.writeVarintField(8,e.ep_id),e.video_type&&t.writeVarintField(9,e.video_type),e.sub_type&&t.writeVarintField(10,e.sub_type),e.fid&&t.writeStringField(11,e.fid),e.fver&&t.writeStringField(12,e.fver),e.player_session_id&&t.writeStringField(13,e.player_session_id),e.progress&&t.writeStringField(14,e.progress),e.play_method&&t.writeVarintField(15,e.play_method),e.video_format&&t.writeVarintField(16,e.video_format),e.player_playback_state&&t.writeVarintField(17,e.player_playback_state),e.danmaku&&t.writeVarintField(18,e.danmaku),e.statue&&t.writeVarintField(19,e.statue),e.videoquality&&t.writeStringField(20,e.videoquality),e.audioquality&&t.writeStringField(21,e.audioquality),e.speed&&t.writeStringField(22,e.speed),e.is_autoplay&&t.writeVarintField(23,e.is_autoplay),e.duration&&t.writeVarintField(24,e.duration),e.realtime&&t.writeVarintField(25,e.realtime),e.videourl&&t.writeStringField(26,e.videourl),e.audiourl&&t.writeStringField(27,e.audiourl),e.player_extra)for(var i=0,r=Object.keys(e.player_extra);i<r.length;i++){var n=r[i];t.writeMessage(28,st,{key:n,value:e.player_extra[n]})}}function st(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}var ut={pv:0,pv_unload:5,click:1,custom:3,player:4,exposure:2},lt=function(e,t){var i,r,n,o=t.reporter.options,a=t.reporter.sequencer.get(),s=a.sn,u=a.time,c={pv:function(){return{page_view_info:{event_id_from:q("spm_id_from")||q("from_spmid")||"",load_type:ae(),pv_start:e.ts||0,extra:U(l(l({},null==o?void 0:o.extra),e.data))}}},pv_unload:function(){var t,i,r,n,a=e.ts,s=null!==(t=null!==(i=null===(r=e.data)||void 0===r?void 0:r.pvStart)&&void 0!==i?i:null===(n=performance)||void 0===n?void 0:n.timeOrigin)&&void 0!==t?t:a,u=a-s,c=z(l(l({},null==o?void 0:o.extra),e.data),["pvStart"]).remain;return{page_view_unload_info:{event_id_from:q("spm_id_from")||q("from_spmid")||"",load_type:ae(),pv_start:s||0,pv_end:a||0,duration:u||0,extra:U(c)}}},click:function(){var t,i,r,n=["targetUrl","buttonType","targetEventId"];n=n.concat(n.map((function(e){return G(e)})));var a=z(l(l({},null==o?void 0:o.extra),e.data),n),s=a.selected,u=a.remain,c=H(s);return{click_info:{target_url:null!==(t=c.target_url)&&void 0!==t?t:"",button_type:null!==(i=c.button_type)&&void 0!==i?i:0,target_event_id:null!==(r=c.target_event_id)&&void 0!==r?r:"",extra:U(u)}}},exposure:function(){return{exposure_info:{extra:U(l(l({},null==o?void 0:o.extra),e.data))}}},player:function(){return e.data=H(e.data),e.data.player_extra&&(e.data.player_extra=U(e.data.player_extra)),{player_info:e.data}},custom:function(){return{extra:U(l(l(l(l({app_buvid:I("Buvid")},Qe()),re()),null==o?void 0:o.extra),e.data))}}},d=(null===(i=c[e.type])||void 0===i?void 0:i.call(c))||{},f=l(l({},null==o?void 0:o.base),null===(r=e.options)||void 0===r?void 0:r.base),p=l({info:ne(f),runtime_info:oe(f),event_id:e.spm,business:e.spm.split(".").slice(0,1).join("."),sn:s||0,sn_gen_time:u||0,ts:e.ts||0,upload_time:Date.now(),event_category:ut[e.type],extra:U(l(l(l(l({app_buvid:I("Buvid")},Qe()),re()),null==o?void 0:o.extra),pe?{_report_exp_retry:ve}:{}))},d),v=new Ae;!function(e,t){if(e.info&&t.writeMessage(1,$e,e.info),e.runtime_info&&t.writeMessage(2,Ye,e.runtime_info),e.event_id&&t.writeStringField(3,e.event_id),e.business&&t.writeStringField(4,e.business),e.sn&&t.writeVarintField(5,e.sn),e.sn_gen_time&&t.writeVarintField(6,e.sn_gen_time),e.ts&&t.writeVarintField(7,e.ts),e.upload_time&&t.writeVarintField(8,e.upload_time),e.event_category&&t.writeVarintField(9,e.event_category),e.page_view_info&&t.writeMessage(10,et,e.page_view_info),e.exposure_info&&t.writeMessage(11,nt,e.exposure_info),e.click_info&&t.writeMessage(12,Je,e.click_info),e.player_info&&t.writeMessage(13,at,e.player_info),e.page_view_unload_info&&t.writeMessage(14,it,e.page_view_unload_info),e.extra)for(var i=0,r=Object.keys(e.extra);i<r.length;i++){var n=r[i];t.writeMessage(15,Xe,{key:n,value:e.extra[n]})}}(p,v);var h=v.finish();return(null==o?void 0:o.logLevel)>=1&&console.log("%c".concat(e.type," ").concat(e.spm,"\n"),"color: #30A46C",p),{log_id:(null==f?void 0:f.logId)||(null!==(n=t.reporter.options)&&void 0!==n&&n.DEBUG_TEST_CHANNEL?"025219":"021436"),event_id:e.spm,body:h,meta:{}}},ct=function(e){var t={events:e},i=new Ae;return function(e,t){if(e.events){var i,r=a(e.events);try{for(r.s();!(i=r.n()).done;){var n=i.value;t.writeMessage(1,We,n)}}catch(e){r.e(e)}finally{r.f()}}}(t,i),i.finish()},dt=null,ft=function(){var e;dt||(dt=null!==(e=window.__BMG_AF__)&&void 0!==e?e:null);return dt},pt=function(){var e=i(c().mark((function e(){var t,i,r,n,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(null===(t=ft())||void 0===t?void 0:t.defDomain)||"i0.hdslb.com",r=/^uat-/.test(location.hostname)?location.hostname.slice(0,4):"",e.prev=2,e.next=5,ye({method:"get",url:"//".concat(r).concat(i,"/bfs/polaris_web_conf/polaris/webcnf/event.cnf"),credentials:"omit"});case 5:(n=e.sent)&&(null===(o=window.localStorage)||void 0===o||o.setItem("__reporter-pb-sample-config",n),W("sampleRateConfig",JSON.parse(n))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.warn("[reporter-pb] fetch sample rate config failed");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),vt=function(e){if(!ht.plugins[e])throw new Error("[reporter-pb]  ".concat(e," "))},ht=function(){function e(t){var n,o,a,u,f=this;r(this,e),s(this,"version",O),s(this,"techEventReporter",null),s(this,"fpPromise",null),this.miss=Math.random()>(null!==(n=null===(o=this.options)||void 0===o?void 0:o.sampleRate)&&void 0!==n?n:1);var p="undefined"!=typeof window,v=p&&/\bDEBUG_TEST_CHANNEL=1\b/.test(window.location.search+window.location.hash),h=p&&!!I("DEBUG_TEST_CHANNEL");v&&N("DEBUG_TEST_CHANNEL","1",0,"same-domain"),this.options=l(l({},t),{},{DEBUG_TEST_CHANNEL:(null==t?void 0:t.DEBUG_TEST_CHANNEL)||v||h});var w=e.plugins.native,b=Q("initBuvidPromise");b||(b=Promise.all([Oe()].concat(d(w?[w.initBuvid()]:[]))).then((function(){f.buvidInit=!0})),W("initBuvidPromise",b)),this.initBuvidPromise=b;var m=X(),g={bsource:m.bsource,bsourceFrom:m.bsourceFrom,uaSource:function(){var e=navigator.userAgent.toLowerCase(),t=function(){return/chrome/i.test(e)||/\b(?:crmo|crios)\/([\w\.]+)/i.test(e)},i={qq:function(){return/QQ\/([\d\.]+)/i.test(e)},wechat:["MicroMessenger","wechat"],douban:["com.douban.frodo","doubanapp"],baidubox:"baiduboxapp",baiduinput:"baiduinput",zhihu:["com.zhihu.android","zhihuhybrid"],haokan:"haokan",iqiyi:["IqiyiApp","iqiyi IqiyiVersion"],NGA:"Nga",weibo:"Weibo",xigua:"NewsArticle",qqlive:"QQLiveBrowser",hupu:"shence.hupu.com",letv:"LetvMobileClient",zuiyou:"Zuiyou",cloudmusic:["CloudMusic","NeteaseMusic"],tieba:"tieba",sogousearch:"SogouSearch",ucbrowser:"UCBrowser",baidubrowser:"baidubrowser",sogoumobilebrowser:"SogouMobileBrowser",huaweibrowser:"HuaweiBrowser",vivobrowser:"VivoBrowser",miuibrowser:"MiuiBrowser",oppobrowser:"oppobrowser",quark:"Quark",mqqbrowser:"MQQBrowser",chromebrowser:t,"360browser":function(){return/\bqihu|(qi?ho?o?|360)browser/i.test(e)||t()&&!window.navigator.webkitPersistentStorage||Object.keys(window).some((function(e){return/qihoo/.test(e)}))}};for(var r in i){var n=i[r];if(Array.isArray(n)){for(var o=0;o<n.length;o++)if(e.indexOf(n[o].toLocaleLowerCase())>=0)return r}else if("string"==typeof n){if(e.indexOf(n.toLocaleLowerCase())>=0)return r}else if("function"==typeof n&&n())return r}return""}()};Object.keys(g).forEach((function(e){e&&(window[e]=g[e])})),this.sequencer=new M;var y,_=D(se,null===(a=this.options)||void 0===a?void 0:a.batch);this.scheduler=new j(l(l({},_.enabled?_.value:{batchSize:1,batchTime:0}),{},{run:(y=i(c().mark((function e(t){var i,r,n,o,a,s,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=(null===(i=f.options)||void 0===i||null===(i=i.base)||void 0===i?void 0:i.logId)||(null!==(r=f.options)&&void 0!==r&&r.DEBUG_TEST_CHANNEL?"025219":"021436"),u=ct(t),(null===(n=f.options)||void 0===n?void 0:n.logLevel)>=2&&(l=d(u).map((function(e){return"0".concat(e.toString(16)).slice(-2)})).join(" "),console.log("log_id: %c".concat(s,"\n%crequest size: %c").concat(u.length," bytes\n%crequest body:\n%c").concat(l),"color: #0090FF","","color: #0090FF","","background-color: #004744; color: #A8F5E5")),e.next=6,Se(u,{url:null===(o=f.options)||void 0===o||null===(o=o.base)||void 0===o?void 0:o.url,retry:null===(a=f.options)||void 0===a?void 0:a.retry,logId:s});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("scheduler_run",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(e){return y.apply(this,arguments)})}));var k=null;this.spmPrefix&&!1!==(null==t?void 0:t.autoPv)&&p&&!Q("autoPvReported")&&(k=this.pv(),e.plugins.native&&this.reportNative({event:"".concat(this.spmPrefix,".0.0.pv"),type:1}),this.flush(),W("autoPvReported",!0)),function(){var e=Q("fetchSampleRateTimer");if(!e){try{var t,i=null===(t=window.localStorage)||void 0===t?void 0:t.getItem("__reporter-pb-sample-config");i&&W("sampleRateConfig",JSON.parse(i))}catch(e){}pt(),e=window.setInterval(pt,12e4),W("fetchSampleRateTimer",e)}}();var x=function(){var e;null!==k&&!1!==(null==t||null===(e=t.autoPv)||void 0===e?void 0:e.unload)&&(k(),k=null),f.flush()};window.addEventListener("beforeunload",x),window.addEventListener("pagehide",x);var F,S=function(){var t=i(c().mark((function t(){var i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=e.plugins.fp)){t.next=4;break}return t.next=4,i.init(f);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();null!=t&&null!==(u=t.feature)&&void 0!==u&&u.fingerPrint&&!e.plugins.fp?this.fpPromise=(F="".concat("https://s1.hdslb.com/bfs/seed/jinkela/short/reporter-pb","/fingerPrint.js"),new Promise((function(e){var t=document.createElement("script");t.crossOrigin="anonymous",t.type="text/javascript",t.src=F,t.onload=function(){return e()},document.body.appendChild(t)}))).then((function(){var t=window.ReporterPbFingerPrint;if(t)return e.use({fp:t}),S()})):this.fpPromise=S()}return o(e,[{key:"spmPrefix",get:function(){var e;return(null===(e=this.options)||void 0===e?void 0:e.spmPrefix)||B("spm_prefix")}},{key:"_handleSpmId",value:function(e){if(!e)return"";if("string"==typeof e)return e;var t=e.prefix||this.spmPrefix||"",i=e.e?".".concat(e.e):"";return t?"".concat(t,".").concat(e.c,".").concat(e.d).concat(i):""}},{key:"report",value:function(e,t,i,r){var n=this,o=this._handleSpmId(t);if(o){if(!this.miss&&function(e){var t=Q("sampleRateConfig");return!t||!t[e]||"number"!=typeof t[e]||Math.ceil(100*Math.random())<=t[e]}(o))if("tech"!==e){var a=Date.now(),s=function(){n.scheduler.add(lt({type:e,spm:o,data:i,ts:a,options:r},{reporter:n})),null!=r&&r.flush&&n.scheduler.flush()};if(this.buvidInit?s():this.initBuvidPromise.then(s),"pv"===e){var u=o.split(".").slice(0,4).concat("unload").join(".");return function(e){return n.report("pv_unload",u,l({pvStart:a},null!=e?e:{}),r)}}}else this._techReport(o,i,r)}else console.warn("[reporter-pb]: spmId not set",{type:e,spm:t,data:i,options:r})}},{key:"pv",value:function(e,t,i){if(!e){var r=this.spmPrefix;e=r?"".concat(r,".0.0"):""}return this.report("pv",e,null!=t?t:{},i)}},{key:"click",value:function(e,t,i){this.report("click",e,t,i)}},{key:"exposure",value:function(e,t,i){this.report("exposure",e,t,i)}},{key:"player",value:function(e,t,i){this.report("player",e,t,i)}},{key:"custom",value:function(e,t,i){this.report("custom",e,t,i)}},{key:"tech",value:function(e,t,i){this.report("tech",e,t,i)}},{key:"flush",value:function(){var e;this.scheduler.flush(),null===(e=this.techEventReporter)||void 0===e||e.flush()}},{key:"fpReport",value:(a=i(c().mark((function t(i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fpPromise;case 2:vt("fp"),e.plugins.fp.fpReport(this,i);case 4:case"end":return t.stop()}}),t,this)}))),function(e){return a.apply(this,arguments)})},{key:"_techReport",value:(n=i(c().mark((function t(i,r,n){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.techEventReporter||(vt("tech"),this.techEventReporter=new e.plugins.tech(this.options,this.initBuvidPromise,this.sequencer)),o=["performance","error","player","custom"].some((function(e){return e===(null==r?void 0:r.type)}))?r.type:"custom",null==r||delete r.type,this.techEventReporter.report(o,i,r,n);case 4:case"end":return t.stop()}}),t,this)}))),function(e,t,i){return n.apply(this,arguments)})},{key:"reportNative",value:(t=i(c().mark((function t(){var i,r=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return vt("native"),t.abrupt("return",(i=e.plugins.native).reportNative.apply(i,r));case 2:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})},{key:"getActionID",value:function(){var t;return vt("native"),(t=e.plugins.native).getActionID.apply(t,arguments)}}],[{key:"use",value:function(e){this.plugins=l(l({},this.plugins),e)}}]);var t,n,a}();function wt(e,t){if(e.log_id&&t.writeStringField(1,e.log_id),e.event_id&&t.writeStringField(2,e.event_id),null!=e.body&&t.writeBytesField(3,e.body),e.meta)for(var i=0,r=Object.keys(e.meta);i<r.length;i++){var n=r[i];t.writeMessage(4,bt,{key:n,value:e.meta[n]})}}function bt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function mt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function gt(e,t){e.app_id&&t.writeVarintField(1,e.app_id),e.platform&&t.writeVarintField(2,e.platform),e.cbuvid&&t.writeStringField(3,e.cbuvid),e.cmid&&t.writeVarintField(4,e.cmid),e.fts&&t.writeStringField(5,e.fts),e.screen_resolution&&t.writeStringField(6,e.screen_resolution),e.timezone&&t.writeStringField(7,e.timezone),e.bilifp&&t.writeStringField(8,e.bilifp),e.device_type&&t.writeStringField(9,e.device_type)}function yt(e,t){e.network_info&&t.writeStringField(1,e.network_info),e.url&&t.writeStringField(2,e.url),e.refer_url&&t.writeStringField(3,e.refer_url),e.logver&&t.writeStringField(4,e.logver),e.abtest&&t.writeStringField(5,e.abtest),e.ptype&&t.writeVarintField(6,e.ptype),e.window_size&&t.writeStringField(7,e.window_size),e.bsource&&t.writeStringField(8,e.bsource),e.bsource_origin&&t.writeStringField(9,e.bsource_origin),e.share_source_origin&&t.writeStringField(10,e.share_source_origin),e.share_session_id&&t.writeStringField(11,e.share_session_id),e.session_id&&t.writeStringField(12,e.session_id)}function _t(e,t){if(e.navigation_start&&t.writeFloatField(1,e.navigation_start),e.unload_event_end&&t.writeFloatField(2,e.unload_event_end),e.redirect_start&&t.writeFloatField(3,e.redirect_start),e.redirect_end&&t.writeFloatField(4,e.redirect_end),e.fetch_start&&t.writeFloatField(5,e.fetch_start),e.domain_lookup_start&&t.writeFloatField(6,e.domain_lookup_start),e.domain_lookup_end&&t.writeFloatField(7,e.domain_lookup_end),e.connect_start&&t.writeFloatField(8,e.connect_start),e.connect_end&&t.writeFloatField(9,e.connect_end),e.secure_connection_start&&t.writeFloatField(10,e.secure_connection_start),e.request_start&&t.writeFloatField(11,e.request_start),e.response_start&&t.writeFloatField(12,e.response_start),e.response_end&&t.writeFloatField(13,e.response_end),e.dom_loading&&t.writeFloatField(14,e.dom_loading),e.dom_interactive&&t.writeFloatField(15,e.dom_interactive),e.dom_content_loaded_event_start&&t.writeFloatField(16,e.dom_content_loaded_event_start),e.dom_content_loaded_event_end&&t.writeFloatField(17,e.dom_content_loaded_event_end),e.dom_complete&&t.writeFloatField(18,e.dom_complete),e.load_event_start&&t.writeFloatField(19,e.load_event_start),e.load_event_end&&t.writeFloatField(20,e.load_event_end),e.cumulative_layout_shift&&t.writeFloatField(21,e.cumulative_layout_shift),e.first_paint&&t.writeFloatField(22,e.first_paint),e.first_contentful_paint&&t.writeFloatField(23,e.first_contentful_paint),e.first_meaningful_paint&&t.writeFloatField(24,e.first_meaningful_paint),e.largest_contentful_paint&&t.writeFloatField(25,e.largest_contentful_paint),e.time_to_first_byte&&t.writeFloatField(26,e.time_to_first_byte),e.extra)for(var i=0,r=Object.keys(e.extra);i<r.length;i++){var n=r[i];t.writeMessage(27,kt,{key:n,value:e.extra[n]})}}function kt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function xt(e,t){if(e.error_type&&t.writeStringField(1,e.error_type),e.name&&t.writeStringField(2,e.name),e.message&&t.writeStringField(3,e.message),e.stack&&t.writeStringField(4,e.stack),e.instruments){var i,r=a(e.instruments);try{for(r.s();!(i=r.n()).done;){var n=i.value;t.writeMessage(5,St,n)}}catch(e){r.e(e)}finally{r.f()}}if(e.extra)for(var o=0,s=Object.keys(e.extra);o<s.length;o++){var u=s[o];t.writeMessage(6,Ft,{key:u,value:e.extra[u]})}}function Ft(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function St(e,t){e.error_instrument_type&&t.writeStringField(1,e.error_instrument_type),e.message&&t.writeStringField(2,e.message),e.ts&&t.writeVarintField(3,e.ts),e.meta&&t.writeStringField(4,e.meta)}function Et(e,t){if(e.spm_id&&t.writeStringField(1,e.spm_id),e.play_from_spmid&&t.writeStringField(2,e.play_from_spmid),e.avid&&t.writeVarintField(3,e.avid),e.cid&&t.writeVarintField(4,e.cid),e.pname&&t.writeVarintField(5,e.pname),e.room_id&&t.writeVarintField(6,e.room_id),e.season_id&&t.writeVarintField(7,e.season_id),e.ep_id&&t.writeVarintField(8,e.ep_id),e.video_type&&t.writeVarintField(9,e.video_type),e.sub_type&&t.writeVarintField(10,e.sub_type),e.fid&&t.writeStringField(11,e.fid),e.fver&&t.writeStringField(12,e.fver),e.player_session_id&&t.writeStringField(13,e.player_session_id),e.progress&&t.writeStringField(14,e.progress),e.play_method&&t.writeVarintField(15,e.play_method),e.video_format&&t.writeVarintField(16,e.video_format),e.player_playback_state&&t.writeVarintField(17,e.player_playback_state),e.danmaku&&t.writeVarintField(18,e.danmaku),e.statue&&t.writeVarintField(19,e.statue),e.videoquality&&t.writeStringField(20,e.videoquality),e.audioquality&&t.writeStringField(21,e.audioquality),e.speed&&t.writeStringField(22,e.speed),e.is_autoplay&&t.writeVarintField(23,e.is_autoplay),e.duration&&t.writeVarintField(24,e.duration),e.realtime&&t.writeVarintField(25,e.realtime),e.videourl&&t.writeStringField(26,e.videourl),e.audiourl&&t.writeStringField(27,e.audiourl),e.player_extra)for(var i=0,r=Object.keys(e.player_extra);i<r.length;i++){var n=r[i];t.writeMessage(28,Vt,{key:n,value:e.player_extra[n]})}}function Vt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}s(ht,"version",O),s(ht,"plugins",{});var Pt={performance:0,error:1,player:3,custom:2},Tt=function(e){var t,i=null==e||null===(t=e.feature)||void 0===t?void 0:t.tech;return i&&"object"===p(i)&&i.logId?i.logId:null!=e&&e.DEBUG_TEST_CHANNEL?"025205":"021434"},Ot=function(e,t){var i,r,n=t.reporter.options,o=t.reporter.sequencer.get(),a=o.sn,s=o.time,u={performance:function(){var t=["type","navigation_start","unload_event_end","redirect_start","redirect_end","fetch_start","domain_lookup_start","domain_lookup_end","connect_start","connect_end","secure_connection_start","request_start","response_start","response_end","dom_loading","dom_interactive","dom_content_loaded_event_start","dom_content_loaded_event_end","dom_complete","load_event_start","load_event_end","cumulative_layout_shift","first_paint","first_contentful_paint","first_meaningful_paint","largest_contentful_paint","time_to_first_byte"];t=t.concat(t.map((function(e){return e.replace(/_[a-z]/g,(function(e){return e[1].toUpperCase()}))})));var i=z(l(l({},null==n?void 0:n.extra),e.data),t),r=i.selected,o=i.remain;return{performance_info:l(l({},H(r)),{},{extra:U(o)})}},error:function(){var t=z(l(l({},null==n?void 0:n.extra),e.data),["errorType","error_type","name","message","stack","instruments"]),i=t.selected,r=t.remain;return{error_event_info:{error_type:i.error_type,name:i.name,message:i.message||i.msg,stack:i.stack,instruments:(Array.isArray(i.instruments)?i.instruments:[]).map((function(e){return R(e)?H(e):e})),extra:U(r)}}},player:function(){return e.data=H(e.data),e.data.player_extra&&R(e.data.player_extra)&&(e.data.player_extra=U(e.data.player_extra)),{player_info:e.data}},custom:function(){return{extra:U(l(l(l(l({app_buvid:I("Buvid")},Qe()),re()),null==n?void 0:n.extra),e.data))}}},c=(null===(i=u[e.type])||void 0===i?void 0:i.call(u))||{},d=l(l({},null===(r=e.options)||void 0===r?void 0:r.base),null==n?void 0:n.base),f=l({info:ne(d),runtime_info:oe(d),event_id:e.spm,business:e.spm.split(".").slice(0,1).join("."),sn:a||0,sn_gen_time:s||0,ts:e.ts||0,upload_time:Date.now(),event_category:Pt[e.type],extra:U(l(l(l(l({app_buvid:I("Buvid")},Qe()),re()),null==n?void 0:n.extra),pe?{_report_exp_retry:ve}:{}))},c),p=new Ae;!function(e,t){if(e.info&&t.writeMessage(1,gt,e.info),e.runtime_info&&t.writeMessage(2,yt,e.runtime_info),e.event_id&&t.writeStringField(3,e.event_id),e.business&&t.writeStringField(4,e.business),e.sn&&t.writeVarintField(5,e.sn),e.sn_gen_time&&t.writeVarintField(6,e.sn_gen_time),e.ts&&t.writeVarintField(7,e.ts),e.upload_time&&t.writeVarintField(8,e.upload_time),e.event_category&&t.writeVarintField(9,e.event_category),e.performance_info&&t.writeMessage(10,_t,e.performance_info),e.error_event_info&&t.writeMessage(11,xt,e.error_event_info),e.player_info&&t.writeMessage(12,Et,e.player_info),e.extra)for(var i=0,r=Object.keys(e.extra);i<r.length;i++){var n=r[i];t.writeMessage(13,mt,{key:n,value:e.extra[n]})}}(f,p);var v=p.finish();return(null==n?void 0:n.logLevel)>=1&&console.log("%c".concat(e.type," ").concat(e.spm,"\n"),"color: #30A46C",f),{log_id:Tt(t.reporter.options),event_id:e.spm,body:v,meta:{metaEventId:e.spm,metaEventCategory:e.type}}},jt=function(e){var t={events:e},i=new Ae;return function(e,t){if(e.events){var i,r=a(e.events);try{for(r.s();!(i=r.n()).done;){var n=i.value;t.writeMessage(1,wt,n)}}catch(e){r.e(e)}finally{r.f()}}}(t,i),i.finish()},Mt=function(){return o((function e(t,n,o){var a,s=this;r(this,e),this.options=t,this.initBuvidPromise=(n||Oe()).then((function(){s.buvidInit=!0})),this.sequencer=o||new M;var u,f=D(se,null===(a=this.options)||void 0===a?void 0:a.batch);this.scheduler=new j(l(l({},f.enabled?f.value:{batchSize:1,batchTime:0}),{},{run:(u=i(c().mark((function e(i){var r,n,o,a,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=jt(i),a=Tt(s.options),(null===(r=s.options)||void 0===r?void 0:r.logLevel)>=2&&(u=d(o).map((function(e){return"0".concat(e.toString(16)).slice(-2)})).join(" "),console.log("log_id: %c".concat(a,"\n%crequest size: %c").concat(o.length," bytes\n%crequest body:\n%c").concat(u),"color: #0090FF","","color: #0090FF","","background-color: #004744; color: #A8F5E5")),Se(o,{url:null===(n=s.options)||void 0===n||null===(n=n.base)||void 0===n?void 0:n.url,retry:null==t?void 0:t.retry,logId:a});case 4:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})}))}),[{key:"report",value:function(e,t,i,r){var n=this,o=function(){var o=Date.now();n.scheduler.add(Ot({type:e,spm:t,data:i,ts:o,options:r},{reporter:n}))};this.buvidInit?o():this.initBuvidPromise.then(o)}},{key:"flush",value:function(){this.scheduler.flush()}}])}();return ht.use({tech:Mt}),ht}));
